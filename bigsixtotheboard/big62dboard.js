/*
 * jQuery JavaScript Library v1.3.2
 * http://jquery.com/
 *
 * Copyright (c) 2009 John Resig
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 *
 * Date: 2009-02-19 17:34:21 -0500 (Thu, 19 Feb 2009)
 * Revision: 6246
 */
(function(){var m=this,g,B=m.jQuery,q=m.$,p=m.jQuery=m.$=function(H,I){return new p.fn.init(H,I)},G=/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,f=/^.[^:#\[\.,]*$/;p.fn=p.prototype={init:function(H,K){H=H||document;if(H.nodeType){this[0]=H;this.length=1;this.context=H;return this}if(typeof H==="string"){var J=G.exec(H);if(J&&(J[1]||!K)){if(J[1]){H=p.clean([J[1]],K)}else{var L=document.getElementById(J[3]);if(L&&L.id!=J[3]){return p().find(H)}var I=p(L||[]);I.context=document;I.selector=H;return I}}else{return p(K).find(H)}}else{if(p.isFunction(H)){return p(document).ready(H)}}if(H.selector&&H.context){this.selector=H.selector;this.context=H.context}return this.setArray(p.isArray(H)?H:p.makeArray(H))},selector:"",jquery:"1.3.2",size:function(){return this.length},get:function(H){return H===g?Array.prototype.slice.call(this):this[H]},pushStack:function(I,K,H){var J=p(I);J.prevObject=this;J.context=this.context;if(K==="find"){J.selector=this.selector+(this.selector?" ":"")+H}else{if(K){J.selector=this.selector+"."+K+"("+H+")"}}return J},setArray:function(H){this.length=0;Array.prototype.push.apply(this,H);return this},each:function(I,H){return p.each(this,I,H)},index:function(H){return p.inArray(H&&H.jquery?H[0]:H,this)},attr:function(I,K,J){var H=I;if(typeof I==="string"){if(K===g){return this[0]&&p[J||"attr"](this[0],I)}else{H={};H[I]=K}}return this.each(function(L){for(I in H){p.attr(J?this.style:this,I,p.prop(this,H[I],J,L,I))}})},css:function(H,I){if((H=="width"||H=="height")&&parseFloat(I)<0){I=g}return this.attr(H,I,"curCSS")},text:function(I){if(typeof I!=="object"&&I!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(I))}var H="";p.each(I||this,function(){p.each(this.childNodes,function(){if(this.nodeType!=8){H+=this.nodeType!=1?this.nodeValue:p.fn.text([this])}})});return H},wrapAll:function(H){if(this[0]){var I=p(H,this[0].ownerDocument).clone();if(this[0].parentNode){I.insertBefore(this[0])}I.map(function(){var J=this;while(J.firstChild){J=J.firstChild}return J}).append(this)}return this},wrapInner:function(H){return this.each(function(){p(this).contents().wrapAll(H)})},wrap:function(H){return this.each(function(){p(this).wrapAll(H)})},append:function(){return this.domManip(arguments,true,function(H){if(this.nodeType==1){this.appendChild(H)}})},prepend:function(){return this.domManip(arguments,true,function(H){if(this.nodeType==1){this.insertBefore(H,this.firstChild)}})},before:function(){return this.domManip(arguments,false,function(H){this.parentNode.insertBefore(H,this)})},after:function(){return this.domManip(arguments,false,function(H){this.parentNode.insertBefore(H,this.nextSibling)})},end:function(){return this.prevObject||p([])},push:[].push,sort:[].sort,splice:[].splice,find:function(H){if(this.length===1){var I=this.pushStack([],"find",H);I.length=0;p.find(H,this[0],I);return I}else{return this.pushStack(p.unique(p.map(this,function(J){return p.find(H,J)})),"find",H)}},clone:function(J){var H=this.map(function(){if(!p.support.noCloneEvent&&!p.isXMLDoc(this)){var L=this.outerHTML;if(!L){var M=this.ownerDocument.createElement("div");M.appendChild(this.cloneNode(true));L=M.innerHTML}return p.clean([L.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/^\s*/,"")])[0]}else{return this.cloneNode(true)}});if(J===true){var K=this.find("*").andSelf(),I=0;H.find("*").andSelf().each(function(){if(this.nodeName!==K[I].nodeName){return}var L=p.data(K[I],"events");for(var N in L){for(var M in L[N]){p.event.add(this,N,L[N][M],L[N][M].data)}}I++})}return H},filter:function(H){return this.pushStack(p.isFunction(H)&&p.grep(this,function(J,I){return H.call(J,I)})||p.multiFilter(H,p.grep(this,function(I){return I.nodeType===1})),"filter",H)},closest:function(H){var J=p.expr.match.POS.test(H)?p(H):null,I=0;return this.map(function(){var K=this;while(K&&K.ownerDocument){if(J?J.index(K)>-1:p(K).is(H)){p.data(K,"closest",I);return K}K=K.parentNode;I++}})},not:function(H){if(typeof H==="string"){if(f.test(H)){return this.pushStack(p.multiFilter(H,this,true),"not",H)}else{H=p.multiFilter(H,this)}}var I=H.length&&H[H.length-1]!==g&&!H.nodeType;return this.filter(function(){return I?p.inArray(this,H)<0:this!=H})},add:function(H){return this.pushStack(p.unique(p.merge(this.get(),typeof H==="string"?p(H):p.makeArray(H))))},is:function(H){return !!H&&p.multiFilter(H,this).length>0},hasClass:function(H){return !!H&&this.is("."+H)},val:function(N){if(N===g){var H=this[0];if(H){if(p.nodeName(H,"option")){return(H.attributes.value||{}).specified?H.value:H.text}if(p.nodeName(H,"select")){var L=H.selectedIndex,O=[],P=H.options,K=H.type=="select-one";if(L<0){return null}for(var I=K?L:0,M=K?L+1:P.length;I<M;I++){var J=P[I];if(J.selected){N=p(J).val();if(K){return N}O.push(N)}}return O}return(H.value||"").replace(/\r/g,"")}return g}if(typeof N==="number"){N+=""}return this.each(function(){if(this.nodeType!=1){return}if(p.isArray(N)&&/radio|checkbox/.test(this.type)){this.checked=(p.inArray(this.value,N)>=0||p.inArray(this.name,N)>=0)}else{if(p.nodeName(this,"select")){var Q=p.makeArray(N);p("option",this).each(function(){this.selected=(p.inArray(this.value,Q)>=0||p.inArray(this.text,Q)>=0)});if(!Q.length){this.selectedIndex=-1}}else{this.value=N}}})},html:function(H){return H===g?(this[0]?this[0].innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,""):null):this.empty().append(H)},replaceWith:function(H){return this.after(H).remove()},eq:function(H){return this.slice(H,+H+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments),"slice",Array.prototype.slice.call(arguments).join(","))},map:function(H){return this.pushStack(p.map(this,function(J,I){return H.call(J,I,J)}))},andSelf:function(){return this.add(this.prevObject)},domManip:function(M,P,O){if(this[0]){var L=(this[0].ownerDocument||this[0]).createDocumentFragment(),I=p.clean(M,(this[0].ownerDocument||this[0]),L),K=L.firstChild;if(K){for(var J=0,H=this.length;J<H;J++){O.call(N(this[J],K),this.length>1||J>0?L.cloneNode(true):L)}}if(I){p.each(I,C)}}return this;function N(Q,R){return P&&p.nodeName(Q,"table")&&p.nodeName(R,"tr")?(Q.getElementsByTagName("tbody")[0]||Q.appendChild(Q.ownerDocument.createElement("tbody"))):Q}}};p.fn.init.prototype=p.fn;function C(H,I){if(I.src){p.ajax({url:I.src,async:false,dataType:"script"})}else{p.globalEval(I.text||I.textContent||I.innerHTML||"")}if(I.parentNode){I.parentNode.removeChild(I)}}function e(){return +new Date}p.extend=p.fn.extend=function(){var M=arguments[0]||{},K=1,L=arguments.length,H=false,J;if(typeof M==="boolean"){H=M;M=arguments[1]||{};K=2}if(typeof M!=="object"&&!p.isFunction(M)){M={}}if(L==K){M=this;--K}for(;K<L;K++){if((J=arguments[K])!=null){for(var I in J){var N=M[I],O=J[I];if(M===O){continue}if(H&&O&&typeof O==="object"&&!O.nodeType){M[I]=p.extend(H,N||(O.length!=null?[]:{}),O)}else{if(O!==g){M[I]=O}}}}}return M};var b=/z-?index|font-?weight|opacity|zoom|line-?height/i,r=document.defaultView||{},t=Object.prototype.toString;p.extend({noConflict:function(H){m.$=q;if(H){m.jQuery=B}return p},isFunction:function(H){return t.call(H)==="[object Function]"},isArray:function(H){return t.call(H)==="[object Array]"},isXMLDoc:function(H){return H.nodeType===9&&H.documentElement.nodeName!=="HTML"||!!H.ownerDocument&&p.isXMLDoc(H.ownerDocument)},globalEval:function(J){if(J&&/\S/.test(J)){var I=document.getElementsByTagName("head")[0]||document.documentElement,H=document.createElement("script");H.type="text/javascript";if(p.support.scriptEval){H.appendChild(document.createTextNode(J))}else{H.text=J}I.insertBefore(H,I.firstChild);I.removeChild(H)}},nodeName:function(I,H){return I.nodeName&&I.nodeName.toUpperCase()==H.toUpperCase()},each:function(J,N,I){var H,K=0,L=J.length;if(I){if(L===g){for(H in J){if(N.apply(J[H],I)===false){break}}}else{for(;K<L;){if(N.apply(J[K++],I)===false){break}}}}else{if(L===g){for(H in J){if(N.call(J[H],H,J[H])===false){break}}}else{for(var M=J[0];K<L&&N.call(M,K,M)!==false;M=J[++K]){}}}return J},prop:function(K,L,J,I,H){if(p.isFunction(L)){L=L.call(K,I)}return typeof L==="number"&&J=="curCSS"&&!b.test(H)?L+"px":L},className:{add:function(H,I){p.each((I||"").split(/\s+/),function(J,K){if(H.nodeType==1&&!p.className.has(H.className,K)){H.className+=(H.className?" ":"")+K}})},remove:function(H,I){if(H.nodeType==1){H.className=I!==g?p.grep(H.className.split(/\s+/),function(J){return !p.className.has(I,J)}).join(" "):""}},has:function(I,H){return I&&p.inArray(H,(I.className||I).toString().split(/\s+/))>-1}},swap:function(K,J,L){var H={};for(var I in J){H[I]=K.style[I];K.style[I]=J[I]}L.call(K);for(var I in J){K.style[I]=H[I]}},css:function(K,I,M,H){if(I=="width"||I=="height"){var O,J={position:"absolute",visibility:"hidden",display:"block"},N=I=="width"?["Left","Right"]:["Top","Bottom"];function L(){O=I=="width"?K.offsetWidth:K.offsetHeight;if(H==="border"){return}p.each(N,function(){if(!H){O-=parseFloat(p.curCSS(K,"padding"+this,true))||0}if(H==="margin"){O+=parseFloat(p.curCSS(K,"margin"+this,true))||0}else{O-=parseFloat(p.curCSS(K,"border"+this+"Width",true))||0}})}if(K.offsetWidth!==0){L()}else{p.swap(K,J,L)}return Math.max(0,Math.round(O))}return p.curCSS(K,I,M)},curCSS:function(L,I,J){var O,H=L.style;if(I=="opacity"&&!p.support.opacity){O=p.attr(H,"opacity");return O==""?"1":O}if(I.match(/float/i)){I=z}if(!J&&H&&H[I]){O=H[I]}else{if(r.getComputedStyle){if(I.match(/float/i)){I="float"}I=I.replace(/([A-Z])/g,"-$1").toLowerCase();var P=r.getComputedStyle(L,null);if(P){O=P.getPropertyValue(I)}if(I=="opacity"&&O==""){O="1"}}else{if(L.currentStyle){var M=I.replace(/\-(\w)/g,function(Q,R){return R.toUpperCase()});O=L.currentStyle[I]||L.currentStyle[M];if(!/^\d+(px)?$/i.test(O)&&/^\d/.test(O)){var K=H.left,N=L.runtimeStyle.left;L.runtimeStyle.left=L.currentStyle.left;H.left=O||0;O=H.pixelLeft+"px";H.left=K;L.runtimeStyle.left=N}}}}return O},clean:function(I,N,L){N=N||document;if(typeof N.createElement==="undefined"){N=N.ownerDocument||N[0]&&N[0].ownerDocument||document}if(!L&&I.length===1&&typeof I[0]==="string"){var K=/^<(\w+)\s*\/?>$/.exec(I[0]);if(K){return[N.createElement(K[1])]}}var J=[],H=[],O=N.createElement("div");p.each(I,function(S,V){if(typeof V==="number"){V+=""}if(!V){return}if(typeof V==="string"){V=V.replace(/(<(\w+)[^>]*?)\/>/g,function(X,Y,W){return W.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?X:Y+"></"+W+">"});var R=V.replace(/^\s+/,"").substring(0,10).toLowerCase();var T=!R.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!R.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||R.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!R.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!R.indexOf("<td")||!R.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!R.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||!p.support.htmlSerialize&&[1,"div<div>","</div>"]||[0,"",""];O.innerHTML=T[1]+V+T[2];while(T[0]--){O=O.lastChild}if(!p.support.tbody){var U=/<tbody/i.test(V),Q=!R.indexOf("<table")&&!U?O.firstChild&&O.firstChild.childNodes:T[1]=="<table>"&&!U?O.childNodes:[];for(var P=Q.length-1;P>=0;--P){if(p.nodeName(Q[P],"tbody")&&!Q[P].childNodes.length){Q[P].parentNode.removeChild(Q[P])}}}if(!p.support.leadingWhitespace&&/^\s/.test(V)){O.insertBefore(N.createTextNode(V.match(/^\s*/)[0]),O.firstChild)}V=p.makeArray(O.childNodes)}if(V.nodeType){J.push(V)}else{J=p.merge(J,V)}});if(L){for(var M=0;J[M];M++){if(p.nodeName(J[M],"script")&&(!J[M].type||J[M].type.toLowerCase()==="text/javascript")){H.push(J[M].parentNode?J[M].parentNode.removeChild(J[M]):J[M])}else{if(J[M].nodeType===1){J.splice.apply(J,[M+1,0].concat(p.makeArray(J[M].getElementsByTagName("script"))))}L.appendChild(J[M])}}return H}return J},attr:function(M,J,N){if(!M||M.nodeType==3||M.nodeType==8){return g}var K=!p.isXMLDoc(M),O=N!==g;J=K&&p.props[J]||J;if(M.tagName){var I=/href|src|style/.test(J);if(J=="selected"&&M.parentNode){M.parentNode.selectedIndex}if(J in M&&K&&!I){if(O){if(J=="type"&&p.nodeName(M,"input")&&M.parentNode){throw"type property can't be changed"}M[J]=N}if(p.nodeName(M,"form")&&M.getAttributeNode(J)){return M.getAttributeNode(J).nodeValue}if(J=="tabIndex"){var L=M.getAttributeNode("tabIndex");return L&&L.specified?L.value:M.nodeName.match(/(button|input|object|select|textarea)/i)?0:M.nodeName.match(/^(a|area)$/i)&&M.href?0:g}return M[J]}if(!p.support.style&&K&&J=="style"){return p.attr(M.style,"cssText",N)}if(O){M.setAttribute(J,""+N)}var H=!p.support.hrefNormalized&&K&&I?M.getAttribute(J,2):M.getAttribute(J);return H===null?g:H}if(!p.support.opacity&&J=="opacity"){if(O){M.zoom=1;M.filter=(M.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(N)+""=="NaN"?"":"alpha(opacity="+N*100+")")}return M.filter&&M.filter.indexOf("opacity=")>=0?(parseFloat(M.filter.match(/opacity=([^)]*)/)[1])/100)+"":""}J=J.replace(/-([a-z])/ig,function(P,Q){return Q.toUpperCase()});if(O){M[J]=N}return M[J]},trim:function(H){return(H||"").replace(/^\s+|\s+$/g,"")},makeArray:function(J){var H=[];if(J!=null){var I=J.length;if(I==null||typeof J==="string"||p.isFunction(J)||J.setInterval){H[0]=J}else{while(I){H[--I]=J[I]}}}return H},inArray:function(J,K){for(var H=0,I=K.length;H<I;H++){if(K[H]===J){return H}}return -1},merge:function(K,H){var I=0,J,L=K.length;if(!p.support.getAll){while((J=H[I++])!=null){if(J.nodeType!=8){K[L++]=J}}}else{while((J=H[I++])!=null){K[L++]=J}}return K},unique:function(N){var I=[],H={};try{for(var J=0,K=N.length;J<K;J++){var M=p.data(N[J]);if(!H[M]){H[M]=true;I.push(N[J])}}}catch(L){I=N}return I},grep:function(I,M,H){var J=[];for(var K=0,L=I.length;K<L;K++){if(!H!=!M(I[K],K)){J.push(I[K])}}return J},map:function(H,M){var I=[];for(var J=0,K=H.length;J<K;J++){var L=M(H[J],J);if(L!=null){I[I.length]=L}}return I.concat.apply([],I)}});var F=navigator.userAgent.toLowerCase();p.browser={version:(F.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(F),opera:/opera/.test(F),msie:/msie/.test(F)&&!/opera/.test(F),mozilla:/mozilla/.test(F)&&!/(compatible|webkit)/.test(F)};p.each({parent:function(H){return H.parentNode},parents:function(H){return p.dir(H,"parentNode")},next:function(H){return p.nth(H,2,"nextSibling")},prev:function(H){return p.nth(H,2,"previousSibling")},nextAll:function(H){return p.dir(H,"nextSibling")},prevAll:function(H){return p.dir(H,"previousSibling")},siblings:function(H){return p.sibling(H.parentNode.firstChild,H)},children:function(H){return p.sibling(H.firstChild)},contents:function(H){return p.nodeName(H,"iframe")?H.contentDocument||H.contentWindow.document:p.makeArray(H.childNodes)}},function(H,I){p.fn[H]=function(J){var K=p.map(this,I);if(J&&typeof J=="string"){K=p.multiFilter(J,K)}return this.pushStack(p.unique(K),H,J)}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(H,I){p.fn[H]=function(J){var M=[],O=p(J);for(var N=0,K=O.length;N<K;N++){var L=(N>0?this.clone(true):this).get();p.fn[I].apply(p(O[N]),L);M=M.concat(L)}return this.pushStack(M,H,J)}});p.each({removeAttr:function(H){p.attr(this,H,"");if(this.nodeType==1){this.removeAttribute(H)}},addClass:function(H){p.className.add(this,H)},removeClass:function(H){p.className.remove(this,H)},toggleClass:function(I,H){if(typeof H!=="boolean"){H=!p.className.has(this,I)}p.className[H?"add":"remove"](this,I)},remove:function(H){if(!H||p.filter(H,[this]).length){p("*",this).add([this]).each(function(){p.event.remove(this);p.removeData(this)});if(this.parentNode){this.parentNode.removeChild(this)}}},empty:function(){p(this).children().remove();while(this.firstChild){this.removeChild(this.firstChild)}}},function(H,I){p.fn[H]=function(){return this.each(I,arguments)}});function k(H,I){return H[0]&&parseInt(p.curCSS(H[0],I,true),10)||0}var h="jQuery"+e(),w=0,D={};p.extend({cache:{},data:function(I,H,J){I=I==m?D:I;var K=I[h];if(!K){K=I[h]=++w}if(H&&!p.cache[K]){p.cache[K]={}}if(J!==g){p.cache[K][H]=J}return H?p.cache[K][H]:K},removeData:function(I,H){I=I==m?D:I;var K=I[h];if(H){if(p.cache[K]){delete p.cache[K][H];H="";for(H in p.cache[K]){break}if(!H){p.removeData(I)}}}else{try{delete I[h]}catch(J){if(I.removeAttribute){I.removeAttribute(h)}}delete p.cache[K]}},queue:function(I,H,K){if(I){H=(H||"fx")+"queue";var J=p.data(I,H);if(!J||p.isArray(K)){J=p.data(I,H,p.makeArray(K))}else{if(K){J.push(K)}}}return J},dequeue:function(K,J){var H=p.queue(K,J),I=H.shift();if(!J||J==="fx"){I=H[0]}if(I!==g){I.call(K)}}});p.fn.extend({data:function(H,J){var K=H.split(".");K[1]=K[1]?"."+K[1]:"";if(J===g){var I=this.triggerHandler("getData"+K[1]+"!",[K[0]]);if(I===g&&this.length){I=p.data(this[0],H)}return I===g&&K[1]?this.data(K[0]):I}else{return this.trigger("setData"+K[1]+"!",[K[0],J]).each(function(){p.data(this,H,J)})}},removeData:function(H){return this.each(function(){p.removeData(this,H)})},queue:function(H,I){if(typeof H!=="string"){I=H;H="fx"}if(I===g){return p.queue(this[0],H)}return this.each(function(){var J=p.queue(this,H,I);if(H=="fx"&&J.length==1){J[0].call(this)}})},dequeue:function(H){return this.each(function(){p.dequeue(this,H)})}});
/*
 * Sizzle CSS Selector Engine - v0.9.3
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var U=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,O=0,K=Object.prototype.toString;var I=function(ab,X,ae,af){ae=ae||[];X=X||document;if(X.nodeType!==1&&X.nodeType!==9){return[]}if(!ab||typeof ab!=="string"){return ae}var ac=[],Z,ai,al,W,ag,Y,aa=true;U.lastIndex=0;while((Z=U.exec(ab))!==null){ac.push(Z[1]);if(Z[2]){Y=RegExp.rightContext;break}}if(ac.length>1&&P.exec(ab)){if(ac.length===2&&L.relative[ac[0]]){ai=M(ac[0]+ac[1],X)}else{ai=L.relative[ac[0]]?[X]:I(ac.shift(),X);while(ac.length){ab=ac.shift();if(L.relative[ab]){ab+=ac.shift()}ai=M(ab,ai)}}}else{var ah=af?{expr:ac.pop(),set:H(af)}:I.find(ac.pop(),ac.length===1&&X.parentNode?X.parentNode:X,T(X));ai=I.filter(ah.expr,ah.set);if(ac.length>0){al=H(ai)}else{aa=false}while(ac.length){var ak=ac.pop(),aj=ak;if(!L.relative[ak]){ak=""}else{aj=ac.pop()}if(aj==null){aj=X}L.relative[ak](al,aj,T(X))}}if(!al){al=ai}if(!al){throw"Syntax error, unrecognized expression: "+(ak||ab)}if(K.call(al)==="[object Array]"){if(!aa){ae.push.apply(ae,al)}else{if(X.nodeType===1){for(var ad=0;al[ad]!=null;ad++){if(al[ad]&&(al[ad]===true||al[ad].nodeType===1&&N(X,al[ad]))){ae.push(ai[ad])}}}else{for(var ad=0;al[ad]!=null;ad++){if(al[ad]&&al[ad].nodeType===1){ae.push(ai[ad])}}}}}else{H(al,ae)}if(Y){I(Y,X,ae,af);if(J){hasDuplicate=false;ae.sort(J);if(hasDuplicate){for(var ad=1;ad<ae.length;ad++){if(ae[ad]===ae[ad-1]){ae.splice(ad--,1)}}}}}return ae};I.matches=function(W,X){return I(W,null,null,X)};I.find=function(ad,W,ae){var ac,aa;if(!ad){return[]}for(var Z=0,Y=L.order.length;Z<Y;Z++){var ab=L.order[Z],aa;if((aa=L.match[ab].exec(ad))){var X=RegExp.leftContext;if(X.substr(X.length-1)!=="\\"){aa[1]=(aa[1]||"").replace(/\\/g,"");ac=L.find[ab](aa,W,ae);if(ac!=null){ad=ad.replace(L.match[ab],"");break}}}}if(!ac){ac=W.getElementsByTagName("*")}return{set:ac,expr:ad}};I.filter=function(ag,af,aj,Z){var Y=ag,al=[],ad=af,ab,W,ac=af&&af[0]&&T(af[0]);while(ag&&af.length){for(var ae in L.filter){if((ab=L.match[ae].exec(ag))!=null){var X=L.filter[ae],ak,ai;W=false;if(ad==al){al=[]}if(L.preFilter[ae]){ab=L.preFilter[ae](ab,ad,aj,al,Z,ac);if(!ab){W=ak=true}else{if(ab===true){continue}}}if(ab){for(var aa=0;(ai=ad[aa])!=null;aa++){if(ai){ak=X(ai,ab,aa,ad);var ah=Z^!!ak;if(aj&&ak!=null){if(ah){W=true}else{ad[aa]=false}}else{if(ah){al.push(ai);W=true}}}}}if(ak!==g){if(!aj){ad=al}ag=ag.replace(L.match[ae],"");if(!W){return[]}break}}}if(ag==Y){if(W==null){throw"Syntax error, unrecognized expression: "+ag}else{break}}Y=ag}return ad};var L=I.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(W){return W.getAttribute("href")}},relative:{"+":function(ad,W,ac){var aa=typeof W==="string",ae=aa&&!/\W/.test(W),ab=aa&&!ae;if(ae&&!ac){W=W.toUpperCase()}for(var Z=0,Y=ad.length,X;Z<Y;Z++){if((X=ad[Z])){while((X=X.previousSibling)&&X.nodeType!==1){}ad[Z]=ab||X&&X.nodeName===W?X||false:X===W}}if(ab){I.filter(W,ad,true)}},">":function(ac,X,ad){var aa=typeof X==="string";if(aa&&!/\W/.test(X)){X=ad?X:X.toUpperCase();for(var Y=0,W=ac.length;Y<W;Y++){var ab=ac[Y];if(ab){var Z=ab.parentNode;ac[Y]=Z.nodeName===X?Z:false}}}else{for(var Y=0,W=ac.length;Y<W;Y++){var ab=ac[Y];if(ab){ac[Y]=aa?ab.parentNode:ab.parentNode===X}}if(aa){I.filter(X,ac,true)}}},"":function(Z,X,ab){var Y=O++,W=V;if(!X.match(/\W/)){var aa=X=ab?X:X.toUpperCase();W=S}W("parentNode",X,Y,Z,aa,ab)},"~":function(Z,X,ab){var Y=O++,W=V;if(typeof X==="string"&&!X.match(/\W/)){var aa=X=ab?X:X.toUpperCase();W=S}W("previousSibling",X,Y,Z,aa,ab)}},find:{ID:function(X,Y,Z){if(typeof Y.getElementById!=="undefined"&&!Z){var W=Y.getElementById(X[1]);return W?[W]:[]}},NAME:function(Y,ab,ac){if(typeof ab.getElementsByName!=="undefined"){var X=[],aa=ab.getElementsByName(Y[1]);for(var Z=0,W=aa.length;Z<W;Z++){if(aa[Z].getAttribute("name")===Y[1]){X.push(aa[Z])}}return X.length===0?null:X}},TAG:function(W,X){return X.getElementsByTagName(W[1])}},preFilter:{CLASS:function(Z,X,Y,W,ac,ad){Z=" "+Z[1].replace(/\\/g,"")+" ";if(ad){return Z}for(var aa=0,ab;(ab=X[aa])!=null;aa++){if(ab){if(ac^(ab.className&&(" "+ab.className+" ").indexOf(Z)>=0)){if(!Y){W.push(ab)}}else{if(Y){X[aa]=false}}}}return false},ID:function(W){return W[1].replace(/\\/g,"")},TAG:function(X,W){for(var Y=0;W[Y]===false;Y++){}return W[Y]&&T(W[Y])?X[1]:X[1].toUpperCase()},CHILD:function(W){if(W[1]=="nth"){var X=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(W[2]=="even"&&"2n"||W[2]=="odd"&&"2n+1"||!/\D/.test(W[2])&&"0n+"+W[2]||W[2]);W[2]=(X[1]+(X[2]||1))-0;W[3]=X[3]-0}W[0]=O++;return W},ATTR:function(aa,X,Y,W,ab,ac){var Z=aa[1].replace(/\\/g,"");if(!ac&&L.attrMap[Z]){aa[1]=L.attrMap[Z]}if(aa[2]==="~="){aa[4]=" "+aa[4]+" "}return aa},PSEUDO:function(aa,X,Y,W,ab){if(aa[1]==="not"){if(aa[3].match(U).length>1||/^\w/.test(aa[3])){aa[3]=I(aa[3],null,null,X)}else{var Z=I.filter(aa[3],X,Y,true^ab);if(!Y){W.push.apply(W,Z)}return false}}else{if(L.match.POS.test(aa[0])||L.match.CHILD.test(aa[0])){return true}}return aa},POS:function(W){W.unshift(true);return W}},filters:{enabled:function(W){return W.disabled===false&&W.type!=="hidden"},disabled:function(W){return W.disabled===true},checked:function(W){return W.checked===true},selected:function(W){W.parentNode.selectedIndex;return W.selected===true},parent:function(W){return !!W.firstChild},empty:function(W){return !W.firstChild},has:function(Y,X,W){return !!I(W[3],Y).length},header:function(W){return/h\d/i.test(W.nodeName)},text:function(W){return"text"===W.type},radio:function(W){return"radio"===W.type},checkbox:function(W){return"checkbox"===W.type},file:function(W){return"file"===W.type},password:function(W){return"password"===W.type},submit:function(W){return"submit"===W.type},image:function(W){return"image"===W.type},reset:function(W){return"reset"===W.type},button:function(W){return"button"===W.type||W.nodeName.toUpperCase()==="BUTTON"},input:function(W){return/input|select|textarea|button/i.test(W.nodeName)}},setFilters:{first:function(X,W){return W===0},last:function(Y,X,W,Z){return X===Z.length-1},even:function(X,W){return W%2===0},odd:function(X,W){return W%2===1},lt:function(Y,X,W){return X<W[3]-0},gt:function(Y,X,W){return X>W[3]-0},nth:function(Y,X,W){return W[3]-0==X},eq:function(Y,X,W){return W[3]-0==X}},filter:{PSEUDO:function(ac,Y,Z,ad){var X=Y[1],aa=L.filters[X];if(aa){return aa(ac,Z,Y,ad)}else{if(X==="contains"){return(ac.textContent||ac.innerText||"").indexOf(Y[3])>=0}else{if(X==="not"){var ab=Y[3];for(var Z=0,W=ab.length;Z<W;Z++){if(ab[Z]===ac){return false}}return true}}}},CHILD:function(W,Z){var ac=Z[1],X=W;switch(ac){case"only":case"first":while(X=X.previousSibling){if(X.nodeType===1){return false}}if(ac=="first"){return true}X=W;case"last":while(X=X.nextSibling){if(X.nodeType===1){return false}}return true;case"nth":var Y=Z[2],af=Z[3];if(Y==1&&af==0){return true}var ab=Z[0],ae=W.parentNode;if(ae&&(ae.sizcache!==ab||!W.nodeIndex)){var aa=0;for(X=ae.firstChild;X;X=X.nextSibling){if(X.nodeType===1){X.nodeIndex=++aa}}ae.sizcache=ab}var ad=W.nodeIndex-af;if(Y==0){return ad==0}else{return(ad%Y==0&&ad/Y>=0)}}},ID:function(X,W){return X.nodeType===1&&X.getAttribute("id")===W},TAG:function(X,W){return(W==="*"&&X.nodeType===1)||X.nodeName===W},CLASS:function(X,W){return(" "+(X.className||X.getAttribute("class"))+" ").indexOf(W)>-1},ATTR:function(ab,Z){var Y=Z[1],W=L.attrHandle[Y]?L.attrHandle[Y](ab):ab[Y]!=null?ab[Y]:ab.getAttribute(Y),ac=W+"",aa=Z[2],X=Z[4];return W==null?aa==="!=":aa==="="?ac===X:aa==="*="?ac.indexOf(X)>=0:aa==="~="?(" "+ac+" ").indexOf(X)>=0:!X?ac&&W!==false:aa==="!="?ac!=X:aa==="^="?ac.indexOf(X)===0:aa==="$="?ac.substr(ac.length-X.length)===X:aa==="|="?ac===X||ac.substr(0,X.length+1)===X+"-":false},POS:function(aa,X,Y,ab){var W=X[2],Z=L.setFilters[W];if(Z){return Z(aa,Y,X,ab)}}}};var P=L.match.POS;for(var R in L.match){L.match[R]=RegExp(L.match[R].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var H=function(X,W){X=Array.prototype.slice.call(X);if(W){W.push.apply(W,X);return W}return X};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(Q){H=function(aa,Z){var X=Z||[];if(K.call(aa)==="[object Array]"){Array.prototype.push.apply(X,aa)}else{if(typeof aa.length==="number"){for(var Y=0,W=aa.length;Y<W;Y++){X.push(aa[Y])}}else{for(var Y=0;aa[Y];Y++){X.push(aa[Y])}}}return X}}var J;if(document.documentElement.compareDocumentPosition){J=function(X,W){var Y=X.compareDocumentPosition(W)&4?-1:X===W?0:1;if(Y===0){hasDuplicate=true}return Y}}else{if("sourceIndex" in document.documentElement){J=function(X,W){var Y=X.sourceIndex-W.sourceIndex;if(Y===0){hasDuplicate=true}return Y}}else{if(document.createRange){J=function(Z,X){var Y=Z.ownerDocument.createRange(),W=X.ownerDocument.createRange();Y.selectNode(Z);Y.collapse(true);W.selectNode(X);W.collapse(true);var aa=Y.compareBoundaryPoints(Range.START_TO_END,W);if(aa===0){hasDuplicate=true}return aa}}}}(function(){var X=document.createElement("form"),Y="script"+(new Date).getTime();X.innerHTML="<input name='"+Y+"'/>";var W=document.documentElement;W.insertBefore(X,W.firstChild);if(!!document.getElementById(Y)){L.find.ID=function(aa,ab,ac){if(typeof ab.getElementById!=="undefined"&&!ac){var Z=ab.getElementById(aa[1]);return Z?Z.id===aa[1]||typeof Z.getAttributeNode!=="undefined"&&Z.getAttributeNode("id").nodeValue===aa[1]?[Z]:g:[]}};L.filter.ID=function(ab,Z){var aa=typeof ab.getAttributeNode!=="undefined"&&ab.getAttributeNode("id");return ab.nodeType===1&&aa&&aa.nodeValue===Z}}W.removeChild(X)})();(function(){var W=document.createElement("div");W.appendChild(document.createComment(""));if(W.getElementsByTagName("*").length>0){L.find.TAG=function(X,ab){var aa=ab.getElementsByTagName(X[1]);if(X[1]==="*"){var Z=[];for(var Y=0;aa[Y];Y++){if(aa[Y].nodeType===1){Z.push(aa[Y])}}aa=Z}return aa}}W.innerHTML="<a href='#'></a>";if(W.firstChild&&typeof W.firstChild.getAttribute!=="undefined"&&W.firstChild.getAttribute("href")!=="#"){L.attrHandle.href=function(X){return X.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var W=I,X=document.createElement("div");X.innerHTML="<p class='TEST'></p>";if(X.querySelectorAll&&X.querySelectorAll(".TEST").length===0){return}I=function(ab,aa,Y,Z){aa=aa||document;if(!Z&&aa.nodeType===9&&!T(aa)){try{return H(aa.querySelectorAll(ab),Y)}catch(ac){}}return W(ab,aa,Y,Z)};I.find=W.find;I.filter=W.filter;I.selectors=W.selectors;I.matches=W.matches})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var W=document.createElement("div");W.innerHTML="<div class='test e'></div><div class='test'></div>";if(W.getElementsByClassName("e").length===0){return}W.lastChild.className="e";if(W.getElementsByClassName("e").length===1){return}L.order.splice(1,0,"CLASS");L.find.CLASS=function(X,Y,Z){if(typeof Y.getElementsByClassName!=="undefined"&&!Z){return Y.getElementsByClassName(X[1])}}})()}function S(X,ac,ab,ag,ad,af){var ae=X=="previousSibling"&&!af;for(var Z=0,Y=ag.length;Z<Y;Z++){var W=ag[Z];if(W){if(ae&&W.nodeType===1){W.sizcache=ab;W.sizset=Z}W=W[X];var aa=false;while(W){if(W.sizcache===ab){aa=ag[W.sizset];break}if(W.nodeType===1&&!af){W.sizcache=ab;W.sizset=Z}if(W.nodeName===ac){aa=W;break}W=W[X]}ag[Z]=aa}}}function V(X,ac,ab,ag,ad,af){var ae=X=="previousSibling"&&!af;for(var Z=0,Y=ag.length;Z<Y;Z++){var W=ag[Z];if(W){if(ae&&W.nodeType===1){W.sizcache=ab;W.sizset=Z}W=W[X];var aa=false;while(W){if(W.sizcache===ab){aa=ag[W.sizset];break}if(W.nodeType===1){if(!af){W.sizcache=ab;W.sizset=Z}if(typeof ac!=="string"){if(W===ac){aa=true;break}}else{if(I.filter(ac,[W]).length>0){aa=W;break}}}W=W[X]}ag[Z]=aa}}}var N=document.compareDocumentPosition?function(X,W){return X.compareDocumentPosition(W)&16}:function(X,W){return X!==W&&(X.contains?X.contains(W):true)};var T=function(W){return W.nodeType===9&&W.documentElement.nodeName!=="HTML"||!!W.ownerDocument&&T(W.ownerDocument)};var M=function(W,ad){var Z=[],aa="",ab,Y=ad.nodeType?[ad]:ad;while((ab=L.match.PSEUDO.exec(W))){aa+=ab[0];W=W.replace(L.match.PSEUDO,"")}W=L.relative[W]?W+"*":W;for(var ac=0,X=Y.length;ac<X;ac++){I(W,Y[ac],Z)}return I.filter(aa,Z)};p.find=I;p.filter=I.filter;p.expr=I.selectors;p.expr[":"]=p.expr.filters;I.selectors.filters.hidden=function(W){return W.offsetWidth===0||W.offsetHeight===0};I.selectors.filters.visible=function(W){return W.offsetWidth>0||W.offsetHeight>0};I.selectors.filters.animated=function(W){return p.grep(p.timers,function(X){return W===X.elem}).length};p.multiFilter=function(Y,W,X){if(X){Y=":not("+Y+")"}return I.matches(Y,W)};p.dir=function(Y,X){var W=[],Z=Y[X];while(Z&&Z!=document){if(Z.nodeType==1){W.push(Z)}Z=Z[X]}return W};p.nth=function(aa,W,Y,Z){W=W||1;var X=0;for(;aa;aa=aa[Y]){if(aa.nodeType==1&&++X==W){break}}return aa};p.sibling=function(Y,X){var W=[];for(;Y;Y=Y.nextSibling){if(Y.nodeType==1&&Y!=X){W.push(Y)}}return W};return;m.Sizzle=I})();p.event={add:function(L,I,K,N){if(L.nodeType==3||L.nodeType==8){return}if(L.setInterval&&L!=m){L=m}if(!K.guid){K.guid=this.guid++}if(N!==g){var J=K;K=this.proxy(J);K.data=N}var H=p.data(L,"events")||p.data(L,"events",{}),M=p.data(L,"handle")||p.data(L,"handle",function(){return typeof p!=="undefined"&&!p.event.triggered?p.event.handle.apply(arguments.callee.elem,arguments):g});M.elem=L;p.each(I.split(/\s+/),function(P,Q){var R=Q.split(".");Q=R.shift();K.type=R.slice().sort().join(".");var O=H[Q];if(p.event.specialAll[Q]){p.event.specialAll[Q].setup.call(L,N,R)}if(!O){O=H[Q]={};if(!p.event.special[Q]||p.event.special[Q].setup.call(L,N,R)===false){if(L.addEventListener){L.addEventListener(Q,M,false)}else{if(L.attachEvent){L.attachEvent("on"+Q,M)}}}}O[K.guid]=K;p.event.global[Q]=true});L=null},guid:1,global:{},remove:function(N,K,M){if(N.nodeType==3||N.nodeType==8){return}var J=p.data(N,"events"),I,H;if(J){if(K===g||(typeof K==="string"&&K.charAt(0)==".")){for(var L in J){this.remove(N,L+(K||""))}}else{if(K.type){M=K.handler;K=K.type}p.each(K.split(/\s+/),function(P,R){var T=R.split(".");R=T.shift();var Q=RegExp("(^|\\.)"+T.slice().sort().join(".*\\.")+"(\\.|$)");if(J[R]){if(M){delete J[R][M.guid]}else{for(var S in J[R]){if(Q.test(J[R][S].type)){delete J[R][S]}}}if(p.event.specialAll[R]){p.event.specialAll[R].teardown.call(N,T)}for(I in J[R]){break}if(!I){if(!p.event.special[R]||p.event.special[R].teardown.call(N,T)===false){if(N.removeEventListener){N.removeEventListener(R,p.data(N,"handle"),false)}else{if(N.detachEvent){N.detachEvent("on"+R,p.data(N,"handle"))}}}I=null;delete J[R]}}})}for(I in J){break}if(!I){var O=p.data(N,"handle");if(O){O.elem=null}p.removeData(N,"events");p.removeData(N,"handle")}}},trigger:function(L,N,K,H){var J=L.type||L;if(!H){L=typeof L==="object"?L[h]?L:p.extend(p.Event(J),L):p.Event(J);if(J.indexOf("!")>=0){L.type=J=J.slice(0,-1);L.exclusive=true}if(!K){L.stopPropagation();if(this.global[J]){p.each(p.cache,function(){if(this.events&&this.events[J]){p.event.trigger(L,N,this.handle.elem)}})}}if(!K||K.nodeType==3||K.nodeType==8){return g}L.result=g;L.target=K;N=p.makeArray(N);N.unshift(L)}L.currentTarget=K;var M=p.data(K,"handle");if(M){M.apply(K,N)}if((!K[J]||(p.nodeName(K,"a")&&J=="click"))&&K["on"+J]&&K["on"+J].apply(K,N)===false){L.result=false}if(!H&&K[J]&&!L.isDefaultPrevented()&&!(p.nodeName(K,"a")&&J=="click")){this.triggered=true;try{K[J]()}catch(O){}}this.triggered=false;if(!L.isPropagationStopped()){var I=K.parentNode||K.ownerDocument;if(I){p.event.trigger(L,N,I,true)}}},handle:function(N){var M,H;N=arguments[0]=p.event.fix(N||m.event);N.currentTarget=this;var O=N.type.split(".");N.type=O.shift();M=!O.length&&!N.exclusive;var L=RegExp("(^|\\.)"+O.slice().sort().join(".*\\.")+"(\\.|$)");H=(p.data(this,"events")||{})[N.type];for(var J in H){var K=H[J];if(M||L.test(K.type)){N.handler=K;N.data=K.data;var I=K.apply(this,arguments);if(I!==g){N.result=I;if(I===false){N.preventDefault();N.stopPropagation()}}if(N.isImmediatePropagationStopped()){break}}}},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(K){if(K[h]){return K}var I=K;K=p.Event(I);for(var J=this.props.length,M;J;){M=this.props[--J];K[M]=I[M]}if(!K.target){K.target=K.srcElement||document}if(K.target.nodeType==3){K.target=K.target.parentNode}if(!K.relatedTarget&&K.fromElement){K.relatedTarget=K.fromElement==K.target?K.toElement:K.fromElement}if(K.pageX==null&&K.clientX!=null){var L=document.documentElement,H=document.body;K.pageX=K.clientX+(L&&L.scrollLeft||H&&H.scrollLeft||0)-(L.clientLeft||0);K.pageY=K.clientY+(L&&L.scrollTop||H&&H.scrollTop||0)-(L.clientTop||0)}if(!K.which&&((K.charCode||K.charCode===0)?K.charCode:K.keyCode)){K.which=K.charCode||K.keyCode}if(!K.metaKey&&K.ctrlKey){K.metaKey=K.ctrlKey}if(!K.which&&K.button){K.which=(K.button&1?1:(K.button&2?3:(K.button&4?2:0)))}return K},proxy:function(I,H){H=H||function(){return I.apply(this,arguments)};H.guid=I.guid=I.guid||H.guid||this.guid++;return H},special:{ready:{setup:E,teardown:function(){}}},specialAll:{live:{setup:function(H,I){p.event.add(this,I[0],c)},teardown:function(J){if(J.length){var H=0,I=RegExp("(^|\\.)"+J[0]+"(\\.|$)");p.each((p.data(this,"events").live||{}),function(){if(I.test(this.type)){H++}});if(H<1){p.event.remove(this,J[0],c)}}}}}};p.Event=function(H){if(!this.preventDefault){return new p.Event(H)}if(H&&H.type){this.originalEvent=H;this.type=H.type}else{this.type=H}this.timeStamp=e();this[h]=true};function l(){return false}function v(){return true}p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=v;var H=this.originalEvent;if(!H){return}if(H.preventDefault){H.preventDefault()}H.returnValue=false},stopPropagation:function(){this.isPropagationStopped=v;var H=this.originalEvent;if(!H){return}if(H.stopPropagation){H.stopPropagation()}H.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=v;this.stopPropagation()},isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l};var a=function(I){var H=I.relatedTarget;while(H&&H!=this){try{H=H.parentNode}catch(J){H=this}}if(H!=this){I.type=I.data;p.event.handle.apply(this,arguments)}};p.each({mouseover:"mouseenter",mouseout:"mouseleave"},function(I,H){p.event.special[H]={setup:function(){p.event.add(this,I,a,H)},teardown:function(){p.event.remove(this,I,a)}}});p.fn.extend({bind:function(I,J,H){return I=="unload"?this.one(I,J,H):this.each(function(){p.event.add(this,I,H||J,H&&J)})},one:function(J,K,I){var H=p.event.proxy(I||K,function(L){p(this).unbind(L,H);return(I||K).apply(this,arguments)});return this.each(function(){p.event.add(this,J,H,I&&K)})},unbind:function(I,H){return this.each(function(){p.event.remove(this,I,H)})},trigger:function(H,I){return this.each(function(){p.event.trigger(H,I,this)})},triggerHandler:function(H,J){if(this[0]){var I=p.Event(H);I.preventDefault();I.stopPropagation();p.event.trigger(I,J,this[0]);return I.result}},toggle:function(J){var H=arguments,I=1;while(I<H.length){p.event.proxy(J,H[I++])}return this.click(p.event.proxy(J,function(K){this.lastToggle=(this.lastToggle||0)%I;K.preventDefault();return H[this.lastToggle++].apply(this,arguments)||false}))},hover:function(H,I){return this.mouseenter(H).mouseleave(I)},ready:function(H){E();if(p.isReady){H.call(document,p)}else{p.readyList.push(H)}return this},live:function(J,I){var H=p.event.proxy(I);H.guid+=this.selector+J;p(document).bind(j(J,this.selector),this.selector,H);return this},die:function(I,H){p(document).unbind(j(I,this.selector),H?{guid:H.guid+this.selector+I}:null);return this}});function c(K){var H=RegExp("(^|\\.)"+K.type+"(\\.|$)"),J=true,I=[];p.each(p.data(this,"events").live||[],function(L,M){if(H.test(M.type)){var N=p(K.target).closest(M.data)[0];if(N){I.push({elem:N,fn:M})}}});I.sort(function(M,L){return p.data(M.elem,"closest")-p.data(L.elem,"closest")});p.each(I,function(){if(this.fn.call(this.elem,K,this.fn.data)===false){return(J=false)}});return J}function j(I,H){return["live",I,H.replace(/\./g,"`").replace(/ /g,"|")].join(".")}p.extend({isReady:false,readyList:[],ready:function(){if(!p.isReady){p.isReady=true;if(p.readyList){p.each(p.readyList,function(){this.call(document,p)});p.readyList=null}p(document).triggerHandler("ready")}}});var A=false;function E(){if(A){return}A=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);p.ready()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);p.ready()}});if(document.documentElement.doScroll&&m==m.top){(function(){if(p.isReady){return}try{document.documentElement.doScroll("left")}catch(H){setTimeout(arguments.callee,0);return}p.ready()})()}}}p.event.add(m,"load",p.ready)}p.each(("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error").split(","),function(I,H){p.fn[H]=function(J){return J?this.bind(H,J):this.trigger(H)}});p(m).bind("unload",function(){for(var H in p.cache){if(H!=1&&p.cache[H].handle){p.event.remove(p.cache[H].handle.elem)}}});(function(){p.support={};var I=document.documentElement,J=document.createElement("script"),N=document.createElement("div"),M="script"+(new Date).getTime();N.style.display="none";N.innerHTML='   <link/><table></table><a href="/a" style="color:red;float:left;opacity:.5;">a</a><select><option>text</option></select><object><param/></object>';var K=N.getElementsByTagName("*"),H=N.getElementsByTagName("a")[0];if(!K||!K.length||!H){return}p.support={leadingWhitespace:N.firstChild.nodeType==3,tbody:!N.getElementsByTagName("tbody").length,objectAll:!!N.getElementsByTagName("object")[0].getElementsByTagName("*").length,htmlSerialize:!!N.getElementsByTagName("link").length,style:/red/.test(H.getAttribute("style")),hrefNormalized:H.getAttribute("href")==="/a",opacity:H.style.opacity==="0.5",cssFloat:!!H.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};J.type="text/javascript";try{J.appendChild(document.createTextNode("window."+M+"=1;"))}catch(L){}I.insertBefore(J,I.firstChild);if(m[M]){p.support.scriptEval=true;delete m[M]}I.removeChild(J);if(N.attachEvent&&N.fireEvent){N.attachEvent("onclick",function(){p.support.noCloneEvent=false;N.detachEvent("onclick",arguments.callee)});N.cloneNode(true).fireEvent("onclick")}p(function(){var O=document.createElement("div");O.style.width=O.style.paddingLeft="1px";document.body.appendChild(O);p.boxModel=p.support.boxModel=O.offsetWidth===2;document.body.removeChild(O).style.display="none"})})();var z=p.support.cssFloat?"cssFloat":"styleFloat";p.props={"for":"htmlFor","class":"className","float":z,cssFloat:z,styleFloat:z,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",tabindex:"tabIndex"};p.fn.extend({_load:p.fn.load,load:function(J,M,N){if(typeof J!=="string"){return this._load(J)}var L=J.indexOf(" ");if(L>=0){var H=J.slice(L,J.length);J=J.slice(0,L)}var K="GET";if(M){if(p.isFunction(M)){N=M;M=null}else{if(typeof M==="object"){M=p.param(M);K="POST"}}}var I=this;p.ajax({url:J,type:K,dataType:"html",data:M,complete:function(P,O){if(O=="success"||O=="notmodified"){I.html(H?p("<div/>").append(P.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(H):P.responseText)}if(N){I.each(N,[P.responseText,O,P])}}});return this},serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password|search/i.test(this.type))}).map(function(H,I){var J=p(this).val();return J==null?null:p.isArray(J)?p.map(J,function(L,K){return{name:I.name,value:L}}):{name:I.name,value:J}}).get()}});p.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(H,I){p.fn[I]=function(J){return this.bind(I,J)}});var s=e();p.extend({get:function(H,J,K,I){if(p.isFunction(J)){K=J;J=null}return p.ajax({type:"GET",url:H,data:J,success:K,dataType:I})},getScript:function(H,I){return p.get(H,null,I,"script")},getJSON:function(H,I,J){return p.get(H,I,J,"json")},post:function(H,J,K,I){if(p.isFunction(J)){K=J;J={}}return p.ajax({type:"POST",url:H,data:J,success:K,dataType:I})},ajaxSetup:function(H){p.extend(p.ajaxSettings,H)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return m.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest()},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(P){P=p.extend(true,P,p.extend(true,{},p.ajaxSettings,P));var Z,I=/=\?(&|$)/g,U,Y,J=P.type.toUpperCase();if(P.data&&P.processData&&typeof P.data!=="string"){P.data=p.param(P.data)}if(P.dataType=="jsonp"){if(J=="GET"){if(!P.url.match(I)){P.url+=(P.url.match(/\?/)?"&":"?")+(P.jsonp||"callback")+"=?"}}else{if(!P.data||!P.data.match(I)){P.data=(P.data?P.data+"&":"")+(P.jsonp||"callback")+"=?"}}P.dataType="json"}if(P.dataType=="json"&&(P.data&&P.data.match(I)||P.url.match(I))){Z="jsonp"+s++;if(P.data){P.data=(P.data+"").replace(I,"="+Z+"$1")}P.url=P.url.replace(I,"="+Z+"$1");P.dataType="script";m[Z]=function(aa){Y=aa;L();O();m[Z]=g;try{delete m[Z]}catch(ab){}if(K){K.removeChild(W)}}}if(P.dataType=="script"&&P.cache==null){P.cache=false}if(P.cache===false&&J=="GET"){var H=e();var X=P.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+H+"$2");P.url=X+((X==P.url)?(P.url.match(/\?/)?"&":"?")+"_="+H:"")}if(P.data&&J=="GET"){P.url+=(P.url.match(/\?/)?"&":"?")+P.data;P.data=null}if(P.global&&!p.active++){p.event.trigger("ajaxStart")}var T=/^(\w+:)?\/\/([^\/?#]+)/.exec(P.url);if(P.dataType=="script"&&J=="GET"&&T&&(T[1]&&T[1]!=location.protocol||T[2]!=location.host)){var K=document.getElementsByTagName("head")[0];var W=document.createElement("script");W.src=P.url;if(P.scriptCharset){W.charset=P.scriptCharset}if(!Z){var R=false;W.onload=W.onreadystatechange=function(){if(!R&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){R=true;L();O();W.onload=W.onreadystatechange=null;K.removeChild(W)}}}K.appendChild(W);return g}var N=false;var M=P.xhr();if(P.username){M.open(J,P.url,P.async,P.username,P.password)}else{M.open(J,P.url,P.async)}try{if(P.data){M.setRequestHeader("Content-Type",P.contentType)}if(P.ifModified){M.setRequestHeader("If-Modified-Since",p.lastModified[P.url]||"Thu, 01 Jan 1970 00:00:00 GMT")}M.setRequestHeader("X-Requested-With","XMLHttpRequest");M.setRequestHeader("Accept",P.dataType&&P.accepts[P.dataType]?P.accepts[P.dataType]+", */*":P.accepts._default)}catch(V){}if(P.beforeSend&&P.beforeSend(M,P)===false){if(P.global&&!--p.active){p.event.trigger("ajaxStop")}M.abort();return false}if(P.global){p.event.trigger("ajaxSend",[M,P])}var Q=function(aa){if(M.readyState==0){if(S){clearInterval(S);S=null;if(P.global&&!--p.active){p.event.trigger("ajaxStop")}}}else{if(!N&&M&&(M.readyState==4||aa=="timeout")){N=true;if(S){clearInterval(S);S=null}U=aa=="timeout"?"timeout":!p.httpSuccess(M)?"error":P.ifModified&&p.httpNotModified(M,P.url)?"notmodified":"success";if(U=="success"){try{Y=p.httpData(M,P.dataType,P)}catch(ac){U="parsererror"}}if(U=="success"){var ab;try{ab=M.getResponseHeader("Last-Modified")}catch(ac){}if(P.ifModified&&ab){p.lastModified[P.url]=ab}if(!Z){L()}}else{p.handleError(P,M,U)}O();if(aa){M.abort()}if(P.async){M=null}}}};if(P.async){var S=setInterval(Q,13);if(P.timeout>0){setTimeout(function(){if(M&&!N){Q("timeout")}},P.timeout)}}try{M.send(P.data)}catch(V){p.handleError(P,M,null,V)}if(!P.async){Q()}function L(){if(P.success){P.success(Y,U)}if(P.global){p.event.trigger("ajaxSuccess",[M,P])}}function O(){if(P.complete){P.complete(M,U)}if(P.global){p.event.trigger("ajaxComplete",[M,P])}if(P.global&&!--p.active){p.event.trigger("ajaxStop")}}return M},handleError:function(I,K,H,J){if(I.error){I.error(K,H,J)}if(I.global){p.event.trigger("ajaxError",[K,I,J])}},active:0,httpSuccess:function(I){try{return !I.status&&location.protocol=="file:"||(I.status>=200&&I.status<300)||I.status==304||I.status==1223}catch(H){}return false},httpNotModified:function(J,H){try{var K=J.getResponseHeader("Last-Modified");return J.status==304||K==p.lastModified[H]}catch(I){}return false},httpData:function(M,K,J){var I=M.getResponseHeader("content-type"),H=K=="xml"||!K&&I&&I.indexOf("xml")>=0,L=H?M.responseXML:M.responseText;if(H&&L.documentElement.tagName=="parsererror"){throw"parsererror"}if(J&&J.dataFilter){L=J.dataFilter(L,K)}if(typeof L==="string"){if(K=="script"){p.globalEval(L)}if(K=="json"){L=m["eval"]("("+L+")")}}return L},param:function(H){var J=[];function K(L,M){J[J.length]=encodeURIComponent(L)+"="+encodeURIComponent(M)}if(p.isArray(H)||H.jquery){p.each(H,function(){K(this.name,this.value)})}else{for(var I in H){if(p.isArray(H[I])){p.each(H[I],function(){K(I,this)})}else{K(I,p.isFunction(H[I])?H[I]():H[I])}}}return J.join("&").replace(/%20/g,"+")}});var n={},o,d=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];function u(I,H){var J={};p.each(d.concat.apply([],d.slice(0,H)),function(){J[this]=I});return J}p.fn.extend({show:function(M,O){if(M){return this.animate(u("show",3),M,O)}else{for(var K=0,I=this.length;K<I;K++){var H=p.data(this[K],"olddisplay");this[K].style.display=H||"";if(p.css(this[K],"display")==="none"){var J=this[K].tagName,N;if(n[J]){N=n[J]}else{var L=p("<"+J+" />").appendTo("body");N=L.css("display");if(N==="none"){N="block"}L.remove();n[J]=N}p.data(this[K],"olddisplay",N)}}for(var K=0,I=this.length;K<I;K++){this[K].style.display=p.data(this[K],"olddisplay")||""}return this}},hide:function(K,L){if(K){return this.animate(u("hide",3),K,L)}else{for(var J=0,I=this.length;J<I;J++){var H=p.data(this[J],"olddisplay");if(!H&&H!=="none"){p.data(this[J],"olddisplay",p.css(this[J],"display"))}}for(var J=0,I=this.length;J<I;J++){this[J].style.display="none"}return this}},_toggle:p.fn.toggle,toggle:function(J,I){var H=typeof J==="boolean";return p.isFunction(J)&&p.isFunction(I)?this._toggle.apply(this,arguments):J==null||H?this.each(function(){var K=H?J:p(this).is(":hidden");p(this)[K?"show":"hide"]()}):this.animate(u("toggle",3),J,I)},fadeTo:function(H,J,I){return this.animate({opacity:J},H,I)},animate:function(L,I,K,J){var H=p.speed(I,K,J);return this[H.queue===false?"each":"queue"](function(){var N=p.extend({},H),P,O=this.nodeType==1&&p(this).is(":hidden"),M=this;for(P in L){if(L[P]=="hide"&&O||L[P]=="show"&&!O){return N.complete.call(this)}if((P=="height"||P=="width")&&this.style){N.display=p.css(this,"display");N.overflow=this.style.overflow}}if(N.overflow!=null){this.style.overflow="hidden"}N.curAnim=p.extend({},L);p.each(L,function(R,V){var U=new p.fx(M,N,R);if(/toggle|show|hide/.test(V)){U[V=="toggle"?O?"show":"hide":V](L)}else{var T=V.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),W=U.cur(true)||0;if(T){var Q=parseFloat(T[2]),S=T[3]||"px";if(S!="px"){M.style[R]=(Q||1)+S;W=((Q||1)/U.cur(true))*W;M.style[R]=W+S}if(T[1]){Q=((T[1]=="-="?-1:1)*Q)+W}U.custom(W,Q,S)}else{U.custom(W,V,"")}}});return true})},stop:function(I,H){var J=p.timers;if(I){this.queue([])}this.each(function(){for(var K=J.length-1;K>=0;K--){if(J[K].elem==this){if(H){J[K](true)}J.splice(K,1)}}});if(!H){this.dequeue()}return this}});p.each({slideDown:u("show",1),slideUp:u("hide",1),slideToggle:u("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(H,I){p.fn[H]=function(J,K){return this.animate(I,J,K)}});p.extend({speed:function(J,K,I){var H=typeof J==="object"?J:{complete:I||!I&&K||p.isFunction(J)&&J,duration:J,easing:I&&K||K&&!p.isFunction(K)&&K};H.duration=p.fx.off?0:typeof H.duration==="number"?H.duration:p.fx.speeds[H.duration]||p.fx.speeds._default;H.old=H.complete;H.complete=function(){if(H.queue!==false){p(this).dequeue()}if(p.isFunction(H.old)){H.old.call(this)}};return H},easing:{linear:function(J,K,H,I){return H+I*J},swing:function(J,K,H,I){return((-Math.cos(J*Math.PI)/2)+0.5)*I+H}},timers:[],fx:function(I,H,J){this.options=H;this.elem=I;this.prop=J;if(!H.orig){H.orig={}}}});p.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(p.fx.step[this.prop]||p.fx.step._default)(this);if((this.prop=="height"||this.prop=="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(I){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var H=parseFloat(p.css(this.elem,this.prop,I));return H&&H>-10000?H:parseFloat(p.curCSS(this.elem,this.prop))||0},custom:function(L,K,J){this.startTime=e();this.start=L;this.end=K;this.unit=J||this.unit||"px";this.now=this.start;this.pos=this.state=0;var H=this;function I(M){return H.step(M)}I.elem=this.elem;if(I()&&p.timers.push(I)&&!o){o=setInterval(function(){var N=p.timers;for(var M=0;M<N.length;M++){if(!N[M]()){N.splice(M--,1)}}if(!N.length){clearInterval(o);o=g}},13)}},show:function(){this.options.orig[this.prop]=p.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop=="width"||this.prop=="height"?1:0,this.cur());p(this.elem).show()},hide:function(){this.options.orig[this.prop]=p.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(K){var J=e();if(K||J>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var H=true;for(var I in this.options.curAnim){if(this.options.curAnim[I]!==true){H=false}}if(H){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(p.css(this.elem,"display")=="none"){this.elem.style.display="block"}}if(this.options.hide){p(this.elem).hide()}if(this.options.hide||this.options.show){for(var L in this.options.curAnim){p.attr(this.elem.style,L,this.options.orig[L])}}this.options.complete.call(this.elem)}return false}else{var M=J-this.startTime;this.state=M/this.options.duration;this.pos=p.easing[this.options.easing||(p.easing.swing?"swing":"linear")](this.state,M,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};p.extend(p.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(H){p.attr(H.elem.style,"opacity",H.now)},_default:function(H){if(H.elem.style&&H.elem.style[H.prop]!=null){H.elem.style[H.prop]=H.now+H.unit}else{H.elem[H.prop]=H.now}}}});if(document.documentElement.getBoundingClientRect){p.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return p.offset.bodyOffset(this[0])}var J=this[0].getBoundingClientRect(),M=this[0].ownerDocument,I=M.body,H=M.documentElement,O=H.clientTop||I.clientTop||0,N=H.clientLeft||I.clientLeft||0,L=J.top+(self.pageYOffset||p.boxModel&&H.scrollTop||I.scrollTop)-O,K=J.left+(self.pageXOffset||p.boxModel&&H.scrollLeft||I.scrollLeft)-N;return{top:L,left:K}}}else{p.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return p.offset.bodyOffset(this[0])}p.offset.initialized||p.offset.initialize();var M=this[0],J=M.offsetParent,I=M,R=M.ownerDocument,P,K=R.documentElement,N=R.body,O=R.defaultView,H=O.getComputedStyle(M,null),Q=M.offsetTop,L=M.offsetLeft;while((M=M.parentNode)&&M!==N&&M!==K){P=O.getComputedStyle(M,null);Q-=M.scrollTop,L-=M.scrollLeft;if(M===J){Q+=M.offsetTop,L+=M.offsetLeft;if(p.offset.doesNotAddBorder&&!(p.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(M.tagName))){Q+=parseInt(P.borderTopWidth,10)||0,L+=parseInt(P.borderLeftWidth,10)||0}I=J,J=M.offsetParent}if(p.offset.subtractsBorderForOverflowNotVisible&&P.overflow!=="visible"){Q+=parseInt(P.borderTopWidth,10)||0,L+=parseInt(P.borderLeftWidth,10)||0}H=P}if(H.position==="relative"||H.position==="static"){Q+=N.offsetTop,L+=N.offsetLeft}if(H.position==="fixed"){Q+=Math.max(K.scrollTop,N.scrollTop),L+=Math.max(K.scrollLeft,N.scrollLeft)}return{top:Q,left:L}}}p.offset={initialize:function(){if(this.initialized){return}var O=document.body,I=document.createElement("div"),K,J,Q,L,P,H,M=O.style.marginTop,N='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';P={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(H in P){I.style[H]=P[H]}I.innerHTML=N;O.insertBefore(I,O.firstChild);K=I.firstChild,J=K.firstChild,L=K.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(J.offsetTop!==5);this.doesAddBorderForTableAndCells=(L.offsetTop===5);K.style.overflow="hidden",K.style.position="relative";this.subtractsBorderForOverflowNotVisible=(J.offsetTop===-5);O.style.marginTop="1px";this.doesNotIncludeMarginInBodyOffset=(O.offsetTop===0);O.style.marginTop=M;O.removeChild(I);this.initialized=true},bodyOffset:function(H){p.offset.initialized||p.offset.initialize();var J=H.offsetTop,I=H.offsetLeft;if(p.offset.doesNotIncludeMarginInBodyOffset){J+=parseInt(p.curCSS(H,"marginTop",true),10)||0,I+=parseInt(p.curCSS(H,"marginLeft",true),10)||0}return{top:J,left:I}}};p.fn.extend({position:function(){var L=0,K=0,I;if(this[0]){var J=this.offsetParent(),M=this.offset(),H=/^body|html$/i.test(J[0].tagName)?{top:0,left:0}:J.offset();M.top-=k(this,"marginTop");M.left-=k(this,"marginLeft");H.top+=k(J,"borderTopWidth");H.left+=k(J,"borderLeftWidth");I={top:M.top-H.top,left:M.left-H.left}}return I},offsetParent:function(){var H=this[0].offsetParent||document.body;while(H&&(!/^body|html$/i.test(H.tagName)&&p.css(H,"position")=="static")){H=H.offsetParent}return p(H)}});p.each(["Left","Top"],function(I,H){var J="scroll"+H;p.fn[J]=function(K){if(!this[0]){return null}return K!==g?this.each(function(){this==m||this==document?m.scrollTo(!I?K:p(m).scrollLeft(),I?K:p(m).scrollTop()):this[J]=K}):this[0]==m||this[0]==document?self[I?"pageYOffset":"pageXOffset"]||p.boxModel&&document.documentElement[J]||document.body[J]:this[0][J]}});p.each(["Height","Width"],function(L,J){var H=L?"Left":"Top",K=L?"Right":"Bottom",I=J.toLowerCase();p.fn["inner"+J]=function(){return this[0]?p.css(this[0],I,false,"padding"):null};p.fn["outer"+J]=function(N){return this[0]?p.css(this[0],I,false,N?"margin":"border"):null};var M=J.toLowerCase();p.fn[M]=function(N){return this[0]==m?document.compatMode=="CSS1Compat"&&document.documentElement["client"+J]||document.body["client"+J]:this[0]==document?Math.max(document.documentElement["client"+J],document.body["scroll"+J],document.documentElement["scroll"+J],document.body["offset"+J],document.documentElement["offset"+J]):N===g?(this.length?p.css(this[0],M):null):this.css(M,typeof N==="string"?N:N+"px")}})})();var BigSix={version:"0.1a",winningScore:150,directions:{NORTH:"north",EAST:"east",WEST:"west",SOUTH:"south",FIRST:"first"}};BigSix.Util={buildArrays:function(c){var a=new Array();for(var b=0;b<c;b++){a.push(new Array())}return a},buildArrayWithValue:function(c,d){var a=new Array();for(var b=0;b<c;b++){a.push(0)}return a}};BigSix.Util.Bone={to_s:function(b){var a="{"+b.light+":"+b.heavy;a+="}";return a},equals:function(b,a){return((b.light==a.light)&&(b.heavy==a.heavy))},isDouble:function(a){return(a.light==a.heavy)},matchesHeavyEnd:function(b,a){return((b.heavy==a.heavy)||(b.heavy==a.light))},matchesLightEnd:function(b,a){return((b.light==a.heavy)||(b.light==a.light))},isSuited:function(b,a){return(BigSix.Util.Bone.matchesHeavyEnd(b,a)||BigSix.Util.Bone.matchesLightEnd(b,a))},getValue:function(b){var a=b.light+b.heavy;return a}};BigSix.Util.Play={markAsSpinner:function(a){a.spinner=true;a.matchValue=a.bone.light;a.endValue=a.bone.heavy;delete a.endConnectedTo;delete a.matchConnectedTo;a.eastConnectedTo=null;a.westConnectedTo=null;a.southConnectedTo=null;a.northConnectedTo=null},getValue:function(b){var a=0;if(b.spinner){if((b.eastConnectedTo==null)||(b.westConnectedTo==null)){a=b.bone.light+b.bone.heavy}}else{if((b.endConnectedTo!=null)&&(b.matchConnectedTo!=null)){a=0}else{if(BigSix.Util.Bone.isDouble(b.bone)){a=b.bone.light+b.bone.heavy}else{if(b.endConnectedTo==null){a+=b.endValue}if(b.matchConnectedTo==null){a+=b.matchValue}}}}return a},to_s:function(b){var a="{";a+="player:"+b.player;if(b.pass){a+=", pass:true"}else{if(b.spinner){a+=",spinner:"+b.spinner}a+=", bone: "+BigSix.Util.Bone.to_s(b.bone);a+=", direction: "+b.direction}a+=",matchValue:"+b.matchValue;a+=",endValue:"+b.endValue;a+=",matchConnectedTo:"+b.matchConnectedTo;a+=",endConnectedTo:"+b.endConnectedTo;a+="}";return a},setMeAsYourMatch:function(b,a){if(a.spinner){if(a.direction==BigSix.directions.EAST){a.westConnectedTo=b.bone}else{if(a.direction==BigSix.directions.WEST){a.eastConnectedTo=b.bone}}return}else{if(BigSix.Util.Bone.matchesHeavyEnd(a.bone,b.bone)){a.matchValue=a.bone.heavy;a.endValue=a.bone.light}else{if(BigSix.Util.Bone.matchesLightEnd(a.bone,b.bone)){a.matchValue=a.bone.light;a.endValue=a.bone.heavy}}}a.matchConnectedTo=b.bone},matchOnFirst:function(b,a){if((b.endConnectedTo==null)&&BigSix.Util.Bone.matchesHeavyEnd(b.bone,a.bone)){b.endConnectedTo=a.bone}else{if((b.matchConnectedTo==null)&&BigSix.Util.Bone.matchesLightEnd(b.bone,a.bone)){b.matchConnectedTo=a.bone}}BigSix.Util.Play.setMeAsYourMatch(b,a)},matchOnSpinner:function(b,a){if((BigSix.directions.EAST==a.direction)&&(b.eastConnectedTo==null)){b.eastConnectedTo=a.bone}else{if((BigSix.directions.WEST==a.direction)&&(b.westConnectedTo==null)){b.westConnectedTo=a.bone}else{if((BigSix.directions.SOUTH==a.direction)&&(b.southConnectedTo==null)){b.southConnectedTo=a.bone}else{if((BigSix.directions.NORTH==a.direction)&&(b.northConnectedTo==null)){b.northConnectedTo=a.bone}}}}BigSix.Util.Play.setMeAsYourMatch(b,a)},matchBones:function(f,a,b,e,d){if((f.direction!=BigSix.directions.FIRST)&&(f.direction!=e)&&!f.spinner){return null}if(!BigSix.Util.Bone.isSuited(f.bone,b)){return null}var c=new BigSix.Play(a,b,e);if(d){BigSix.Util.Play.markAsSpinner(c)}if(f.spinner){BigSix.Util.Play.matchOnSpinner(f,c)}else{if(f.direction==BigSix.directions.FIRST){BigSix.Util.Play.matchOnFirst(f,c)}else{f.endConnectedTo=c.bone;BigSix.Util.Play.setMeAsYourMatch(f,c)}}return c}};BigSix.Util.State={to_s:function(d){var a="number of players:"+d.number_of_players;a+=",players_hand:[";for(var c=0;c<d.players_hand.length;c++){a+="[";for(var b=0;b<d.players_hand[c].length;b++){a+=BigSix.Util.Bone.to_s(d.players_hand[c][b])+","}a+="],"}a+="],";a+="plays:[";for(var c=0;c<d.plays.length;c++){a+=BigSix.Util.Play.to_s(d.plays[c])}a+="]";a+=",boneyard:[";for(var c=0;c<d.boneyard.length;c++){a+=BigSix.Util.Bone.to_s(d.boneyard[c])}a+="]";a+=",players_scoring:[";for(var c=0;c<d.players_scoring.length;c++){a+="[";for(var b=0;b<d.players_scoring[c].length;b++){a+=d.players_scoring[c][b]+","}a+="],"}a+="]";return a},isDomino:function(b){for(var a=0;a<b.players_hand.length;a++){if(b.players_hand[a].length==0){return true}}return false},isLocked:function(a){return(a.number_of_players==a.passes)},isGameOver:function(b){for(var a=0;a<b.players_score.length;a++){if(b.players_score[a]>=BigSix.winningScore){return true}}return false},isRoundOver:function(a){return(BigSix.Util.State.isLocked(a)||BigSix.Util.State.isDomino(a))},getWinner:function(b){for(var a=0;a<b.players_score.length;a++){if(b.players_score[a]>=BigSix.winningScore){return a}}return -1},resetRound:function(a){a.passes=0;a.players_hand=BigSix.Util.buildArrays(a.number_of_players);a.players_played=BigSix.Util.buildArrays(a.number_of_players);a.boneyard=new Array();a.spinner=null;a.plays=new Array();return a}};BigSix.Util.View={isDomino:function(a){for(var b=0;b<a.players_hand.length;b++){if(a.players_hand[b]==0){return true}}return false},isLocked:function(a){return(a.number_of_players==a.passes)},isGameOver:function(a){for(var b=0;b<a.players_score.length;b++){if(a.players_score[b]>=BigSix.winningScore){return true}}return false},getWinner:function(a){for(var b=0;b<a.players_score.length;b++){if(a.players_score[b]>=BigSix.winningScore){return b}}return -1},isRoundOver:function(a){return(BigSix.Util.View.isLocked(a)||BigSix.Util.View.isDomino(a))}};BigSix.Errors={PASS:"pass",GAMEOVER:"gameover",SCORE:"score",LOCKED:"locked",DOMINO:"domino",MISSING:"missing",TURN:"turn",SYNC:"sync"};BigSix.Error={},BigSix.Error=function(b,a,c,d){this.kind=c;this.player=b,this.move=a;this.message=d};if(typeof BigSix=="undefined"){BigSix={}}BigSix.Bone={};BigSix.Bone=function(a,b){return{light:a,heavy:b}};BigSix.State={};BigSix.State=function(a,b){return{spinner:null,number_of_players:a,players_hand:BigSix.Util.buildArrays(a),partners:b,plays:new Array(),players_score:BigSix.Util.buildArrayWithValue(a,0),players_scoring:BigSix.Util.buildArrays(a),players_played:BigSix.Util.buildArrays(a),current_player:-1,first_player:-1,boneyard:new Array(),spinner:null,passes:0}};BigSix.View={};BigSix.View=function(c,b){var d=new Array(c.number_of_players);for(var a=0;a<c.number_of_players;a++){d[a]=c.players_hand[a].length}return{boneyard:c.boneyard.length,hand:c.players_hand[b],number_of_players:c.number_of_players,current_player:c.current_player,passes:c.passes,plays:c.plays,me:b,players_hand:d,spinner:c.spinner,first_player:c.first_player,partners:c.partners,players_score:c.players_score}};BigSix.Play={};BigSix.Play=function(c,e,f){var d=false;if((e==null)||(typeof e=="undefined")){d=true}var a=-1;var b=-1;if(BigSix.directions.FIRST==f){a=e.heavy;b=e.light}return{player:c,bone:e,direction:f,pass:d,spinner:false,matchValue:b,endValue:a,matchConnectedTo:null,endConnectedTo:null}};BigSix.Move={};BigSix.Move=function(b,c,d){var a=0;if((d!=null)&&(typeof d!="undefined")){a=d}return{bone:b,direction:c,score:a}};BigSix.Error={};BigSix.Errors={PASS:"pass",GAMEOVER:"gameover",SCORE:"score",LOCKED:"locked",DOMINO:"domino",MISSING:"missing",TURN:"turn",SYNC:"sync"};BigSix.Error=function(b,a,c,d){return{kind:c,player:b,move:a,message:d}};if(typeof BigSix=="undefined"){BigSix={}}BigSix.Scanner={};BigSix.Scanner=function(a){this.plays=a};BigSix.Scanner.prototype.isPlayable=function(c){if(this.plays.length==0){return true}for(var a=0;a<this.plays.length;a++){if(this.plays[a].pass){continue}var b=this.plays[a];if(this.availableForPlay(b)){if(this.plays[a].spinner&&BigSix.Util.Bone.isSuited(c,b.bone)){return true}if((b.endConnectedTo==null)&&((c.light==b.endValue)||(c.heavy==b.endValue))){return true}if((b.matchConnectedTo==null)&&((c.light==b.matchValue)||(c.heavy==b.matchValue))){return true}}}return false};BigSix.Scanner.prototype.availableForPlay=function(a){if(a.spinner&&((a.southConnectedTo==null)||(a.northConnectedTo==null)||(a.eastConnectedTo==null)||(a.westConnectedTo==null))){return true}else{if(!a.spinner&&((a.endConnectedTo==null)||(a.matchConnectedTo==null))){return true}}return false};BigSix.Scanner.prototype.getPlayableEnds=function(){var a=new Array();for(var b=0;b<this.plays.length;b++){if(this.plays[b].pass){continue}if(this.availableForPlay(this.plays[b])){a.push(this.plays[b])}}return a};BigSix.Scanner.prototype.isHandPlayable=function(a){for(var b=0;b<a.length;b++){if(this.isPlayable(a[b])){return true}}return false};BigSix.Scanner.prototype.getAvailableMoves=function(c){var b=new Array();if(this.plays.length==0){for(var e=0;e<c.length;e++){b.push(BigSix.Move(c[e],BigSix.directions.FIRST))}return b}var a=this.getPlayableEnds();for(var e=0;e<c.length;e++){for(var d=0;d<a.length;d++){if(!BigSix.Util.Bone.isSuited(c[e],a[d].bone)){continue}if(a[d].spinner){if((a[d].eastConnectedTo==null)||(a[d].westConnectedTo==null)){if(a[d].eastConnectedTo==null){b.push(BigSix.Move(c[e],BigSix.directions.EAST))}if(a[d].westConnectedTo==null){b.push(BigSix.Move(c[e],BigSix.directions.WEST))}}else{if(a[d].northConnectedTo==null){b.push(BigSix.Move(c[e],BigSix.directions.NORTH))}if(a[d].southConnectedTo==null){b.push(BigSix.Move(c[e],BigSix.directions.SOUTH))}}}else{if(a[d].direction==BigSix.directions.FIRST){if((a[d].endConnectedTo==null)&&((c[e].light==a[d].endValue)||(c[e].heavy==a[d].endValue))){b.push(BigSix.Move(c[e],BigSix.directions.EAST))}else{if((a[d].matchConnectedTo==null)&&((c[e].light==a[d].matchValue)||(c[e].heavy==a[d].matchValue))){b.push(BigSix.Move(c[e],BigSix.directions.WEST))}}}else{if((a[d].endConnectedTo==null)&&((c[e].light==a[d].endValue)||(c[e].heavy==a[d].endValue))){b.push(BigSix.Move(c[e],a[d].direction))}}}}}return b};BigSix.Scanner.prototype.getTargetPlayFor=function(b){var a=this.getPlayableEnds();var e=null;var d=null;for(var c=(a.length-1);c>=0;c--){if(!BigSix.Util.Bone.isSuited(a[c].bone,b.bone)){continue}if(a[c].spinner&&((b.direction==BigSix.directions.NORTH)||(BigSix.directions.SOUTH==b.direction))){d=a[c]}else{if((b.direction==a[c].direction)&&(a[c].endConnectedTo==null)&&((b.bone.light==a[c].endValue)||(b.bone.heavy==a[c].endValue))){d=a[c]}else{if(a[c].direction==BigSix.directions.FIRST){if((a[c].endConnectedTo==null)&&((b.bone.light==a[c].endValue)||(b.bone.heavy==a[c].endValue))){e=a[c]}else{if((a[c].matchConnectedTo==null)&&((b.bone.light==a[c].matchValue)||(b.bone.heavy==a[c].matchValue))){e=a[c]}}}}}if(d||e){break}}if(d!=null){return d}if(e!=null){return e}return null};if(typeof BigSix=="undefined"){BigSix={}}BigSix.Pen={};BigSix.Pen=function(){this.round=function(d){if(d%5==0){return d}var c=d;var e=d;while(c%5!=0){c++}while(e%5!=0){e--}var b=c-d;var a=d-e;if(b<a){return c}return e};this.getTheCount=function(c){var b=0;for(var a=0;a<c.length;a++){if(c[a].pass){continue}b+=BigSix.Util.Play.getValue(c[a])}if((b%5)!=0){b=0}return b};this.getTheDominoCount=function(d){var c=0;for(var b=0;b<d.length;b++){for(var a=0;a<d[b].length;a++){c+=d[b][a].light+d[b][a].heavy}}return this.round(c)};this.getTheLockedCounts=function(h){var d=new Array(h.length);var g=200;var b=0;var e=new Array(h.length);for(var c=0;c<h.length;c++){var f=0;for(var a=0;a<h[c].length;a++){f+=h[c][a].light+h[c][a].heavy}if(f<g){g=f}d[c]=f}for(var c=0;c<d.length;c++){if(d[c]!=g){b+=d[c]}}for(var c=0;c<d.length;c++){if(d[c]==g){e[c]=this.round(b)}else{e[c]=0}}return e}};if(typeof BigSix=="undefined"){BigSix={}}BigSix.Analysis={};BigSix.Analysis=function(a){this.suits=[0,0,0,0,0,0,0];this.moves=new Array();this.view=a;this.scanner=new BigSix.Scanner(this.view.plays);this.pen=new BigSix.Pen();this.reset();this.canPlay=function(){return(this.moves.length>0)}};BigSix.Analysis.prototype.getValueForMove=function(b){var e=this.view.plays.length;var f=this.view.plays;var d=0;if(f.length==0){d=BigSix.Util.Bone.getValue(b.bone)}else{var a=this.scanner.getPlayableEnds();var g=this.scanner.getTargetPlayFor(b);if(g==null){return d}for(var c=0;c<a.length;c++){if(BigSix.Util.Bone.equals(a[c].bone,g.bone)){if(g.spinner){d+=BigSix.Util.Play.getValue(g)}else{if(BigSix.directions.FIRST==g.direction){if(g.matchConnectedTo==null&&BigSix.Util.Bone.matchesHeavyEnd(g.bone,b.bone)){d+=g.bone.light}else{if(g.endConnectedTo==null&&BigSix.Util.Bone.matchesLightEnd(g.bone,b.bone)){d+=g.bone.heavy}}}}if(BigSix.Util.Bone.isDouble(b.bone)){d+=BigSix.Util.Bone.getValue(b.bone)}else{if(BigSix.Util.Bone.matchesHeavyEnd(b.bone,g.bone)){d+=b.bone.light}else{if(BigSix.Util.Bone.matchesLightEnd(b.bone,g.bone)){d+=b.bone.heavy}}}}else{d+=BigSix.Util.Play.getValue(a[c])}}}if((d%5)!=0){d=0}return d};BigSix.Analysis.prototype.reset=function(){this.suits=[0,0,0,0,0,0,0];for(var a=0;a<this.view.plays.length;a++){if(this.view.plays[a].pass){continue}if(BigSix.Util.Bone.isDouble(this.view.plays[a].bone)){this.suits[this.view.plays[a].bone.light]+=1}else{this.suits[this.view.plays[a].bone.light]+=1;this.suits[this.view.plays[a].bone.heavy]+=1}}this.moves=new Array();this.moves=this.scanner.getAvailableMoves(this.view.hand);for(var a=0;a<this.moves.length;a++){var b=this.getValueForMove(this.moves[a]);this.moves[a].score=b}};if(typeof BigSix=="undefined"){BigSix={}}BigSix.GamePlay={};BigSix.GamePlay=function(a){this.state=a;this.pen=new BigSix.Pen()};BigSix.GamePlay.prototype.startRound=function(){var c=9;if(this.state.number_of_players==4){c=7}this.state.boneyard=[new BigSix.Bone(0,0),new BigSix.Bone(0,1),new BigSix.Bone(0,2),new BigSix.Bone(0,3),new BigSix.Bone(0,4),new BigSix.Bone(0,5),new BigSix.Bone(0,6),new BigSix.Bone(1,1),new BigSix.Bone(1,2),new BigSix.Bone(1,3),new BigSix.Bone(1,4),new BigSix.Bone(1,5),new BigSix.Bone(1,6),new BigSix.Bone(2,2),new BigSix.Bone(2,3),new BigSix.Bone(2,4),new BigSix.Bone(2,5),new BigSix.Bone(2,6),new BigSix.Bone(3,3),new BigSix.Bone(3,4),new BigSix.Bone(3,5),new BigSix.Bone(3,6),new BigSix.Bone(4,4),new BigSix.Bone(4,5),new BigSix.Bone(4,6),new BigSix.Bone(5,5),new BigSix.Bone(5,6),new BigSix.Bone(6,6)];this.state.boneyard.sort(function(){return 0.5-Math.random()});for(var b=0;b<this.state.players_hand.length;b++){for(var a=0;a<c;a++){this.state.players_hand[b].push(this.state.boneyard.pop())}}};BigSix.GamePlay.prototype.pullFromBoneyard=function(){this.state.players_hand[this.state.current_player].push(this.state.boneyard.pop())};BigSix.GamePlay.prototype.whatIsFirstPlay=function(){var d=[6,5,4,3,2,1,0];var e={player:-1,move:null};for(var c=0;c<d.length;c++){for(var b=0;b<this.state.players_hand.length;b++){for(var a=0;a<this.state.players_hand[b].length;a++){if(!BigSix.Util.Bone.isDouble(this.state.players_hand[b][a])){continue}if(this.state.players_hand[b][a].light==d[c]){e.player=b;e.move=new BigSix.Move(this.state.players_hand[b][a],BigSix.directions.FIRST);return e}}}}return e};BigSix.GamePlay.prototype.pass=function(b){var e=new BigSix.Analysis(new BigSix.View(this.state,b));if(e.canPlay()){throw new BigSix.Error(b,move,BigSix.Errors.TURN,"player "+b+" can still play")}this.state.passes+=1;var d=new BigSix.Play(b);this.state.plays.push(d);if(!BigSix.Util.State.isLocked(this.state)){this.nextPlayer()}else{var c=this.pen.getTheLockedCounts(this.state.players_hand);for(var a=0;a<c.length;a++){if(c[a]>0){this.state.players_score[a]+=c[a];this.state.players_scoring[a].push(c[a])}}}};BigSix.GamePlay.prototype.receivePlay=function(d,a){if(BigSix.Util.State.isGameOver(this.state)){throw new BigSix.Error(d,a,BigSix.Errors.GAMEOVER,"The game is over.")}if(BigSix.Util.State.isLocked(this.state)){throw new BigSix.Error(d,a,BigSix.Errors.LOCKED,"The game is locked.")}if(BigSix.Util.State.isRoundOver(this.state)){throw new BigSix.Error(d,a,BigSix.Errors.DOMINO,"The round is over.")}if(a.bone==null){throw new BigSix.Error(d,a,BigSix.Errors.MISSING,"The bone is missing")}if(a.direction==null){throw new BigSix.Error(d,a,BigSix.Errors.MISSING,"The direction is missing.")}if(d!=this.state.current_player){throw new BigSix.Error(d,a,BigSix.Errors.TURN,"Wrong player "+d+" and "+this.state.current_player)}for(var c=0;c<this.state.plays.length;c++){if(this.state.plays[c].pass){continue}if(BigSix.Util.Bone.equals(this.state.plays[c].bone,a.bone)){throw new BigSix.Error(d,a,BigSix.Errors.SYNC,"The bone "+a.bone.light+":"+a.bone.heavy+" has already been played.")}}this.layBone(d,a);this.state.passes=0;if(!BigSix.Util.State.isGameOver(this.state)){if(BigSix.Util.State.isDomino(this.state)){var b=this.pen.getTheDominoCount(this.state.players_hand);this.state.players_score[this.state.current_player]+=b;this.state.players_scoring[this.state.current_player].push(b)}else{this.nextPlayer()}}};BigSix.GamePlay.prototype.layBone=function(b,a){var c=new BigSix.Scanner(this.state.plays);var e=null;if(this.state.plays.length==0){a.direction=BigSix.directions.FIRST}else{e=c.getTargetPlayFor(a);if(e==null){throw new BigSix.Error(b,a,BigSix.Errors.TURN,"bad play "+a.bone.light+":"+a.bone.heavy+" in "+a.direction+" direction")}}var f=this.removeFromHand(b,a.bone);if(f==null){throw new BigSix.Error(b,null,BigSix.Errors.TURN,"The bone "+a.bone.light+":"+a.bone.heavy+" is not in the players hand.")}this.state.players_played[b].push(f);if(this.state.plays.length==0){this.state.plays[0]=new BigSix.Play(b,f,a.direction);if(BigSix.Util.Bone.isDouble(f)){BigSix.Util.Play.markAsSpinner(this.state.plays[0]);this.state.spinner=this.state.plays[0]}}else{if(this.state.spinner==null&&BigSix.Util.Bone.isDouble(f)){this.state.spinner=BigSix.Util.Play.matchBones(e,b,f,a.direction,true);this.state.plays.push(this.state.spinner)}else{this.state.plays.push(BigSix.Util.Play.matchBones(e,b,f,a.direction,false))}}var d=this.pen.getTheCount(this.state.plays);if(d>0){this.state.players_score[b]+=d;this.state.players_scoring[b].push(d)}};BigSix.GamePlay.prototype.nextPlayer=function(){if(!BigSix.Util.State.isRoundOver(this.state)){this.state.current_player+=1;if(this.state.current_player==this.state.players_hand.length){this.state.current_player=0}return this.state.current_player}};BigSix.GamePlay.prototype.removeFromHand=function(d,e){for(var c=0;c<this.state.players_hand[d].length;c++){if(BigSix.Util.Bone.equals(e,this.state.players_hand[d][c])){var a=this.state.players_hand[d].splice(c,1);return e}}return null};if(typeof BigSix=="undefined"){BigSix={}}BigSix.Android={};BigSix.Android=function(a){this.view=a;this.analysis=new BigSix.Analysis(this.view);this.player=function(){return this.view.me};this.canPlay=function(){return(this.analysis.moves.length>0)};this.getMove=function(){if(!this.canPlay()){return null}this.analysis.moves.sort(function(d,c){return c.score-d.score});return this.analysis.moves[0]}};if(typeof BigSix=="undefined"){BigSix={}}BigSix.Commentator={};BigSix.Commentator=function(a){this.names=a;this.pen=new BigSix.Pen()};BigSix.Commentator.prototype.getCommentary=function(a){if((a==null)||(a.plays.length==0)){return""}var c="";try{c=this.announceMove(a)}catch(b){b.message+"get commentary: "+b.message;throw b}return c};BigSix.Commentator.prototype.announceMove=function(b){var c=this.getLastPlay(b);var d="<span class='player_name'>"+this.names[c.player]+"</span>";if(BigSix.Util.State.isGameOver(b)){if(BigSix.Util.State.isLocked(b)){d=this.sayLockedGame(b)}else{d=this.sayRegularMove(b)}d+=" WINNER: <span class='player_name'>"+this.names[BigSix.Util.State.getWinner(b)]+"</span>"}else{if(BigSix.Util.State.isDomino(b)){d+=": DOMINO!!!!  ";var a=this.lastScore(b.players_scoring[c.player]);if(a>0){d+=" points from dominoing "+a}}else{if(BigSix.Util.State.isLocked(b)){d=this.sayLockedGame(b)}else{if(c.pass){d+=": PASS"}else{d=this.sayRegularMove(b)}}}}return d};BigSix.Commentator.prototype.sayLockedGame=function(d){var c=-1;for(var b=0;b<d.plays.length;b++){if(d.plays[b].pass){continue}c=d.plays[b].player}if(c==-1){throw d.to_s()}var e="<span class='player_name'>"+this.names[c]+"</span>: LOCKS the game.";var a=this.pen.getTheLockedCounts(d.players_hand);for(var b=0;b<a.length;b++){if(a[b]==0){continue}e+="<br/><span class='player_name'>"+this.names[b]+"</span>: points from locked game"+a[b]}return e};BigSix.Commentator.prototype.sayRegularMove=function(a){var b=this.getLastPlay(a);var c="<span class='player_name'>"+this.getPlayersName(b.player)+"</span>: ";if(a.plays.length==1){c+=" downs "+b.bone.light+":"+b.bone.heavy}else{c+=b.bone.light+":"+b.bone.heavy+" to the "+b.direction}score=this.pen.getTheCount(a.plays);if(score>0){c+=" with <span class='player_name'>"+score+"</span> points"}return c};BigSix.Commentator.prototype.getPlayersName=function(a){return this.names[a]};BigSix.Commentator.prototype.getLastPlay=function(a){var b=a.plays[a.plays.length-1];return b};BigSix.Commentator.prototype.lastScore=function(a){var c=0;var b=a.length-1;if(b>=0){c=a[b]}return c};if(typeof BigSix=="undefined"){BigSix={}}BigSix.GameController={};BigSix.GameController=function(a){this.state=a;this.game=new BigSix.GamePlay(this.state)};BigSix.GameController.prototype.startTheHand=function(b,a){BigSix.Util.State.resetRound(this.state);this.game.startRound();if(b){var c=this.game.whatIsFirstPlay();this.state.current_player=c.player;this.state.first_player=c.player;this.game.receivePlay(c.player,c.move)}else{this.state.first_player=a;this.state.current_player=a}};BigSix.GameController.prototype.turn=function(b,a){if(b!=null){if(a==null||(typeof a=="undefined")){if(this.state.boneyard.length==0){this.game.pass(b)}else{this.game.pullFromBoneyard()}}else{this.game.receivePlay(b,a)}}else{var a=this.getMoveFromAndroid();while((a==null)&&(this.state.boneyard.length>0)){try{this.game.pullFromBoneyard();a=this.getMoveFromAndroid()}catch(c){c.message+"Android pull: "+c.message;throw c}}if(a==null){try{this.game.pass(this.state.current_player)}catch(c){c.message+"Android pass: "+c.message;throw c}}else{try{this.game.receivePlay(this.state.current_player,a)}catch(c){c.message+"Android play: "+c.message;throw c}}}};BigSix.GameController.prototype.getMoveFromAndroid=function(){var c=null;try{var b=new BigSix.View(this.state,this.state.current_player);var a=new BigSix.Android(b);c=a.getMove()}catch(d){d.message+"Android get move: "+d.message;throw d}return c};BigSix.GameController.prototype.isStopped=function(){var a=false;a=(BigSix.Util.State.isGameOver(this.state)||BigSix.Util.State.isLocked(this.state)||BigSix.Util.State.isRoundOver(this.state));return a};var BigSixUI={number_of_players:2,delayedEvent:null,domino:{width:20,height:40},overflow_direction:{east:"south",west:"north",north:"west",south:"east"},isTall:function(a,b,c){if((a==b)&&((c==BigSix.directions.EAST)||(c==BigSix.directions.WEST))){return true}if((a==b)&&((c==BigSix.directions.NORTH)||(c==BigSix.directions.SOUTH))){return false}if((a!=b)&&((c==BigSix.directions.EAST)||(c==BigSix.directions.WEST))){return false}if((a!=b)&&((c==BigSix.directions.NORTH)||(c==BigSix.directions.SOUTH))){return true}if((a==b)&&(c==BigSix.directions.FIRST)){return true}return false},delayEvent:function(c,b,a){if(BigSixUI.delayedEvent){BigSixUI.clearDelayedEvents()}BigSixUI.delayedEvent=setTimeout(function(){a(b)},c)},clearDelayedEvents:function(){clearTimeout(BigSixUI.delayedEvent);BigSixUI.delayedEvent=null}};var BoneBuilder={TALL_FACES:new Array(),WIDE_FACES:new Array(),VFACES:["","one","vtwo","vthree","four","five","vsix"],HFACES:["","one","htwo","hthree","four","five","hsix"],createTallDomino:function(d,b,a,f){var e="bone";e+=(d<b)?d+""+b:b+""+d;var c='<div id="'+e+'" class="vbone"';if(typeof a!=undefined&&typeof f!="undefined"){c+=' style="position:absolute;left:'+a+"px;top:"+f+'px;"'}c+='><div class="die"><div class="'+this.VFACES[d]+'"/>';c+='<div class="'+this.VFACES[b]+' v2nd"/>';c+="</div></div>";return c},createWideDomino:function(d,b,a,f){var e="bone";e+=(d<b)?d+""+b:b+""+d;var c='<div id="'+e+'" class="hbone"';if(typeof a!=undefined&&typeof f!="undefined"){c+='style="position:absolute;left:'+a+"px;top:"+f+'px;"'}c+='><div class="die"><div class="'+this.HFACES[d]+'"/>';c+='<div class="'+this.HFACES[b]+' h2nd"/>';c+="</div></div>";return c},createWideHiliteDomino:function(c,a,e){var d="bone";var b='<div id="bone_'+c+'" class="hbonegrey"';if(typeof a!=undefined&&typeof e!="undefined"){b+='style="position:absolute;left:'+a+"px;top:"+e+'px;"'}b+='><div class="die"><div class="grey">';b+='</div><div class="grey h2nd">';b+"</div></div></div>";return b},createTallHiliteDomino:function(c,a,e){var d="bone";var b='<div id="bone_'+c+'" class="vbonegrey"';if(typeof a!=undefined&&typeof e!="undefined"){b+='style="position:absolute;left:'+a+"px;top:"+e+'px;"'}b+='><div class="die"><div class="grey">';b+='</div><div class="grey v2nd">';b+"</div></div></div>";return b}};BoneBuilder.TALL_FACES[0]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div>';BoneBuilder.TALL_FACES[1]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div>';BoneBuilder.TALL_FACES[2]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';BoneBuilder.TALL_FACES[3]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div  class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div>';BoneBuilder.TALL_FACES[4]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div  class="pip-grid"></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';BoneBuilder.TALL_FACES[5]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';BoneBuilder.TALL_FACES[6]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div  class="pip-grid"></div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';BoneBuilder.WIDE_FACES[0]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div>';BoneBuilder.WIDE_FACES[1]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div>';BoneBuilder.WIDE_FACES[2]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div>';BoneBuilder.WIDE_FACES[3]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div  class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';BoneBuilder.WIDE_FACES[4]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';BoneBuilder.WIDE_FACES[5]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid">.</div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';BoneBuilder.WIDE_FACES[6]='<div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid">.</div></td><td><div  class="pip-grid"></div></td><td><div class="pip-grid">.</div></td></tr></table></div><div class="pip-grid-row"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid"><div class="pip">.</div></div></td><td><div class="pip-grid"><div class="pip">.</div></div></td></tr></table></div>';if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.Skeleton={render:function(a){var b=this.renderSkeleton();if($(a.element).is("body")){$(a.element).empty();$(a.element).html(b)}else{$("#"+a.element).empty();$("#"+a.element).html(b)}$("#top-data-region").html(this.renderGame(a.state,a.player_names));if(a.callMoney){$("#container-moneycall-region").html(this.renderMoneyCall())}else{$("#container-moneycall-region").remove()}},renderSkeleton:function(){var a='<div id="gamerow"><table cellspacing="0" cellpadding="0" border="0"><tr><td><div id="gamerow-left">';a+='<div id="message-region"><div class="commentary">&nbsp;</div></div>';a+=this.renderBoard();a+="</div></td><td>";a+='<div id="gamerow-right"><div id="upper-region">';a+='<div id="data-region"><div id="top-data-region"></div></div>';a+='<div id="moneycall-region"><div id="container-moneycall-region"></div></div>';a+='<div id="hand-region"></div>';a+="</div>";a+="</div></div></td></tr></table></div>";return a},renderMenu:function(){var a='<div id="new-game" class="menu-item">New Game</div>';$("#menu").html(a)},renderBoard:function(){var a="";a+='<div id="board" class="inner-board_content">';return a},renderGame:function(b,c){var a='<table cellspacing="0" cellpadding="0" border="0"><tr>';a+='<td><div class="column-data-region">';if(b.players_hand.length>2){a+='<div class="player-info"></div>';a+='<div class="player-info"></div>';a+=this.renderScore(1,c)}a+="</div></td>";a+='<td><div class="column-data-region">';if(b.players_hand.length>2){a+=this.renderScore(2,c)}else{a+=this.renderScore(1,c)}a+='<div id="handbox-data-region">';a+=this.renderHandBox(b);a+="</div>";a+=this.renderScore(0,c);a+='</div></td><td><div class="column-data-region">';a+=this.renderBoneyard();a+='<div class="player-info"></div>';if(b.players_hand.length>3){a+=this.renderScore(3,c)}else{a+=this.renderScore()}a+="</div></td></tr></table>";return a},renderBoneyard:function(){var a='<div class="player-info">';a+='<div class="player-name"><span class="player-name">Boneyard</span></div>';a+='<div><span id="boneyard-value" class="player-score"></span></div>';a+="</div>";return a},renderScore:function(c,b){var a='<div class="player-info">';if(typeof c!="undefined"){a+='<div id="player-seat-'+c+'">';a+='<div class="player-name"><span  class="player-name">'+b[c]+"</span></div>";a+='<div><span id="player-score-'+c+'"class="player-score">0</span></div>';a+="</div>"}a+="</div>";return a},renderHandBox:function(b){var a='<div><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="handcount"></div></td><td>';if(b.players_hand.length>2){a+='<div class="handcount bonecount"><span id="player-hand-2">0</span></div>'}else{a+='<div class="handcount bonecount"><span id="player-hand-1">0</span></div>'}a+='</td><td><div class="handcount"></div></td></tr></table></div>';a+='<div><table cellspacing="0" cellpadding="0" border="0"><tr><td>';if(b.players_hand.length>2){a+='<div class="handcount bonecount"><span id="player-hand-1">0</span></div>'}else{a+='<div class="handcount bonecount"><span id="player-hand-1"></span></div>'}a+='</td><td><div class="handcount"></div></td><td>';if(b.players_hand.length==4){a+='<div class="handcount bonecount"><span id="player-hand-3">0</span></div>'}else{a+='<div class="handcount bonecount"><span id="player-hand-3"></span></div>'}a+="</div></td></tr></table></div>";a+='<div><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="handcount"></div></td><td>';a+='<div class="handcount bonecount"><span id="player-hand-0">00</span></div>';a+='</td><td><div class="handcount"></div></td></tr></table></div>';return a},renderMoneyCall:function(){var a='<div><table cellspacing="0" cellpadding="0" border="0"><tr><td>';a+=this.renderCount(25);a+="</td><td>";a+=this.renderCount(30);a+="</td><td>";a+=this.renderCount(35);a+='</td></tr></table></div><div><table cellspacing="0" cellpadding="0" border="0"><tr><td>';a+=this.renderCount(10);a+="</td><td>";a+=this.renderCount(15);a+="</td><td>";a+=this.renderCount(20);a+='</td></tr></table></div><div><table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="count"><span class="count-value"></span></div></td><td>';a+=this.renderCount(5);a+='</td><td><div class="count"><span class="count-value"></span></div></td></tr></table></div>';return a},renderCount:function(b){var a='<div class="count"><span class="count-value">'+b+"</span></div>";return a},markTurn:function(a){for(var b=0;b<4;b++){if($("#player-seat-"+b).length>0){$("#player-seat-"+b).removeClass("yourturn")}}$("#player-seat-"+a).addClass("yourturn")}};if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.EastAxis={};BigSixUI.EastAxis=function(){this.overflow=false;this.x=-1;this.y=-1;this.direction=BigSix.directions.EAST};BigSixUI.EastAxis.prototype.getHTML=function(d,b,a){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.EAST)){c=BoneBuilder.createWideDomino(b,a,this.x,this.y)}else{c=BoneBuilder.createTallDomino(b,a,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.EAST)){c=BoneBuilder.createTallDomino(b,a,this.x,this.y)}else{c=BoneBuilder.createWideDomino(b,a,this.x,this.y)}}return c};BigSixUI.EastAxis.prototype.adjustForBoard=function(c,b,a){if((this.x+BigSixUI.domino.height)>=BigSixUI.width){if(b!=a){this.overflow=true;if(c.bone.light==c.bone.heavy){this.x=c.x;this.y=c.y+BigSixUI.domino.height}else{this.x-=BigSixUI.domino.width-1;this.y+=BigSixUI.domino.width}}}};BigSixUI.EastAxis.prototype.getX=function(d,c,b){var a=0;if(d.bone.light==d.bone.heavy){a=d.x+BigSixUI.domino.width}else{a=d.x+BigSixUI.domino.height}return a};BigSixUI.EastAxis.prototype.getY=function(c,b,a){var d=0;if(c.bone.light==c.bone.heavy){d=c.y+(BigSixUI.domino.width/2)}else{if(b==a){d=c.y-(BigSixUI.domino.width/2)}else{d=c.y}}return d};BigSixUI.EastAxis.prototype.hilite=function(d,b,a,e){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.EAST)){c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.EAST)){c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}}return c};if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.WestAxis={};BigSixUI.WestAxis=function(){this.overflow=false;this.x=-1;this.y=-1;this.direction=BigSix.directions.WEST};BigSixUI.WestAxis.prototype.getHTML=function(d,b,a){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.WEST)){c=BoneBuilder.createWideDomino(b,a,this.x,this.y)}else{c=BoneBuilder.createTallDomino(a,b,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.WEST)){c=BoneBuilder.createTallDomino(a,b,this.x,this.y)}else{c=BoneBuilder.createWideDomino(a,b,this.x,this.y)}}return c};BigSixUI.WestAxis.prototype.adjustForBoard=function(c,b,a){if(this.x-(BigSixUI.domino.height/3)<=0){if(b!=a){this.overflow=true;if(c.bone.light==c.bone.heavy){this.x=c.x;this.y=c.y-BigSixUI.domino.height}else{this.x+=BigSixUI.domino.width;this.y-=BigSixUI.domino.width}}}};BigSixUI.WestAxis.prototype.getX=function(d,c,b){var a=0;if(c==b){a=d.x-BigSixUI.domino.width}else{a=d.x-BigSixUI.domino.height}return a};BigSixUI.WestAxis.prototype.getY=function(c,b,a){var d=0;if(c.bone.light==c.bone.heavy){d=c.y+(BigSixUI.domino.width/2)}else{if(b==a){d=c.y-(BigSixUI.domino.width/2)}else{d=c.y}}return d};BigSixUI.WestAxis.prototype.hilite=function(d,b,a,e){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.WEST)){c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.WEST)){c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}}return c};if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.NorthAxis={};BigSixUI.NorthAxis=function(){this.overflow=false;this.x=-1;this.y=-1;this.direction=BigSix.directions.NORTH};BigSixUI.NorthAxis.prototype.getHTML=function(d,b,a){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.NORTH)){c=BoneBuilder.createWideDomino(b,a,this.x,this.y)}else{c=BoneBuilder.createTallDomino(a,b,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.NORTH)){c=BoneBuilder.createTallDomino(a,b,this.x,this.y)}else{c=BoneBuilder.createWideDomino(a,b,this.x,this.y)}}return c};BigSixUI.NorthAxis.prototype.adjustForBoard=function(c,b,a){if((this.y-(BigSixUI.domino.width/2))<=0){this.overflow=true;if(c.bone.light==c.bone.heavy){this.x=c.x+BigSixUI.domino.height;this.y=c.y}else{if(b==a){this.x=c.x+BigSixUI.domino.width;this.y+=6}else{this.x=c.x+BigSixUI.domino.width;this.y+=BigSixUI.domino.height+1}}}};BigSixUI.NorthAxis.prototype.getX=function(d,c,b){var a=0;if(!d.spinner&&(d.bone.light==d.bone.heavy)){a=d.x+(BigSixUI.domino.width/2)}else{if(c==b){a=d.x-(BigSixUI.domino.width/2)}else{a=d.x}}return a};BigSixUI.NorthAxis.prototype.getY=function(c,b,a){var d=0;if(b==a){d=c.y-BigSixUI.domino.width}else{d=c.y-BigSixUI.domino.height}return d};BigSixUI.NorthAxis.prototype.hilite=function(d,b,a,e){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.NORTH)){c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.NORTH)){c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}}return c};if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.SouthAxis={};BigSixUI.SouthAxis=function(){this.overflow=false;this.x=-1;this.y=-1;this.direction=BigSix.directions.SOUTH};BigSixUI.SouthAxis.prototype.getHTML=function(d,b,a){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.SOUTH)){c=BoneBuilder.createWideDomino(a,b,this.x,this.y)}else{c=BoneBuilder.createTallDomino(a,b,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.SOUTH)){c=BoneBuilder.createTallDomino(b,a,this.x,this.y)}else{c=BoneBuilder.createWideDomino(a,b,this.x,this.y)}}return c};BigSixUI.SouthAxis.prototype.adjustForBoard=function(c,b,a){if((this.y+BigSixUI.domino.height)>=BigSixUI.height){if(b!=a){this.overflow=true;if(c.bone.light==c.bone.heavy){this.x=c.x-BigSixUI.domino.height;this.y=c.y}else{if(b==a){this.x=play.x;this.y=play.y}else{this.x=c.x-BigSixUI.domino.height;this.y=c.y+BigSixUI.domino.width}}}}};BigSixUI.SouthAxis.prototype.getX=function(d,c,b){var a=0;if(c==b){a=d.x-(BigSixUI.domino.width/2)}else{if(!d.spinner&&(d.bone.light==d.bone.heavy)){a=d.x+(BigSixUI.domino.width/2)}else{a=d.x}}return a};BigSixUI.SouthAxis.prototype.getY=function(c,b,a){var d=0;if(!c.spinner&&(c.bone.light==c.bone.heavy)){d=c.y+BigSixUI.domino.width}else{d=c.y+BigSixUI.domino.height}return d};BigSixUI.SouthAxis.prototype.hilite=function(d,b,a,e){this.x=this.getX(d,b,a);this.y=this.getY(d,b,a);this.adjustForBoard(d,b,a);var c="";if(this.overflow){if(BigSixUI.isTall(b,a,BigSix.directions.SOUTH)){c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}}else{if(BigSixUI.isTall(b,a,BigSix.directions.SOUTH)){c=BoneBuilder.createTallHiliteDomino(e,this.x,this.y)}else{c=BoneBuilder.createWideHiliteDomino(e,this.x,this.y)}}return c};if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.Board={};BigSixUI.Board=function(b,c,a){this.id=b;this.spinner=null;this.hilitedHand=null;this.width=c;this.height=a;BigSixUI.height=this.height;BigSixUI.width=this.width;this.overflow={east:false,west:false,north:false,south:false}};BigSixUI.Board.prototype.reset=function(){$("#"+this.id).empty();this.spinner=null;this.hilitedHand=null;this.overflow[BigSix.directions.EAST]=false;this.overflow[BigSix.directions.WEST]=false;this.overflow[BigSix.directions.NORTH]=false;this.overflow[BigSix.directions.SOUTH]=false};BigSixUI.Board.prototype.add=function(e,c){var k=0;var h=0;var b=-1;var j=-1;var f="";if(e.direction==BigSix.directions.FIRST){var g=(BigSixUI.isTall(e.light,e.heavy,e.direction))?10:20;var a=(BigSixUI.isTall(e.light,e.heavy,e.direction))?3:13;k=(this.width/2)-g-(BigSixUI.domino.width);h=(this.height/2)-a-(BigSixUI.domino.height);if(BigSixUI.isTall(e.matchValue,e.endValue,e.direction)){f=BoneBuilder.createTallDomino(e.matchValue,e.endValue,k,h)}else{f=BoneBuilder.createWideDomino(e.matchValue,e.endValue,k,h)}}else{var l=this.getLastPlay(e,c);var d=null;if((e.direction==BigSix.directions.EAST)||(e.direction==BigSix.directions.FIRST)){if(this.overflow[e.direction]){d=new BigSixUI.SouthAxis()}else{d=new BigSixUI.EastAxis()}}else{if(e.direction==BigSix.directions.WEST){if(this.overflow[e.direction]){d=new BigSixUI.NorthAxis()}else{d=new BigSixUI.WestAxis()}}else{if(e.direction==BigSix.directions.NORTH){if(this.overflow[e.direction]){d=new BigSixUI.EastAxis()}else{d=new BigSixUI.NorthAxis()}}else{if(e.direction==BigSix.directions.SOUTH){if(this.overflow[e.direction]){d=new BigSixUI.WestAxis()}else{d=new BigSixUI.SouthAxis()}}}}}f=d.getHTML(l,e.matchValue,e.endValue);k=d.x;h=d.y;if(!this.overflow[e.direction]){this.overflow[e.direction]=d.overflow}}e.x=k;e.y=h;$("#"+this.id).append(f)};BigSixUI.Board.prototype.getLastPlay=function(d,e){var c=null;if(d.spinner){if(d.eastConnectedTo==null&&d.westConnectedTo!=null){c=d.westConnectedTo}else{if(d.westConnectedTo==null&&d.eastConnectedTo!=null){c=d.eastConnectedTo}}}else{if(d.endConnectedTo==null&&d.matchConnectedTo!=null){c=d.matchConnectedTo}else{if(d.matchConnectedTo==null&&d.endConnectedTo!=null){c=d.endConnectedTo}}}if(c==null){return null}var b=null;for(var a=0;a<e.length;a++){if(e[a].pass){continue}if(e[a].bone.light==c.light&&e[a].bone.heavy==c.heavy){b=e[a]}}return b};BigSixUI.Board.prototype.getLastPlayForMove=function(a,d){var c=null;for(var b=(d.length-1);b>=0;b--){if(!BigSix.Util.Bone.isSuited(a.bone,d[b].bone)){continue}if(d[b].spinner&&((a.direction==BigSix.directions.NORTH)||(a.direction==Bigsix.directions.SOUTH))){c=d[b]}else{if(d[b].direction==BigSix.directions.FIRST){c=d[b]}else{if(a.direction==d[b].direction){c=d[b]}}}if(c){break}}return c};BigSixUI.Board.prototype.showPlayablePositions=function(e,c){if($("#bone_"+e.direction).size()>0){this.hidePlayablePositions()}var d=null;var b=0;var j=0;var g="";if(c.length==0){var h=(BigSixUI.isTall(e.bone.light,e.bone.heavy,e.direction))?10:20;var a=(BigSixUI.isTall(e.bone.light,e.bone.heavy,e.direction))?3:13;x=(this.width/2)-h-(BigSixUI.domino.width);y=(this.height/2)-a-(BigSixUI.domino.height);j=e.bone.heavy;b=e.bone.light;if(BigSixUI.isTall(b,j,e.direction)){g=BoneBuilder.createTallHiliteDomino(BigSix.directions.FIRST,x,y)}else{g=BoneBuilder.createWideHiliteDomino(BigSix.directions.FIRST,x,y)}$("#"+this.id).append(g);return}var f=new BigSix.Scanner(c);var k=f.getTargetPlayFor(e);if(e.bone.light==k.bone.light||e.bone.light==k.bone.heavy){b=e.bone.light;j=e.bone.heavy}else{b=e.bone.heavy;j=e.bone.light}if((e.direction==BigSix.directions.EAST)||(e.direction==BigSix.directions.FIRST)){if(this.overflow[e.direction]){d=new BigSixUI.SouthAxis()}else{d=new BigSixUI.EastAxis()}}else{if(e.direction==BigSix.directions.WEST){if(this.overflow[e.direction]){d=new BigSixUI.NorthAxis()}else{d=new BigSixUI.WestAxis()}}else{if(e.direction==BigSix.directions.NORTH){if(this.overflow[e.direction]){d=new BigSixUI.EastAxis()}else{d=new BigSixUI.NorthAxis()}}else{if(e.direction==BigSix.directions.SOUTH){if(this.overflow[e.direction]){d=new BigSixUI.WestAxis()}else{d=new BigSixUI.SouthAxis()}}}}}g=d.hilite(k,b,j,e.direction);if(!((this.hilitedHand)&&BigSix.Util.Bone.equals(this.hilitedHand,e.bone))){this.hilitedHand=e.bone;this.hidePlayablePositions()}$("#"+this.id).append(g)};BigSixUI.Board.prototype.hidePlayablePositions=function(){$("#bone_"+BigSix.directions.EAST).remove();$("#bone_"+BigSix.directions.WEST).remove();$("#bone_"+BigSix.directions.SOUTH).remove();$("#bone_"+BigSix.directions.NORTH).remove();$("#bone_"+BigSix.directions.FIRST).remove()};if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.Hand={};BigSixUI.Hand=function(a){this.id="#"+a;this.hilited=null};BigSixUI.Hand.prototype.render=function(a){$(this.id).empty();var c="";for(var b=0;b<a.length;b++){c+='<div><table cellspacing="0" cellpadding="0" border="0"><tr>';c+='<td><div id="handhold">';c+=BoneBuilder.createTallDomino(a[b].light,a[b].heavy);c+="</div></td>";b++;if(b<a.length){c+='<td><div id="handhold">';c+=BoneBuilder.createTallDomino(a[b].light,a[b].heavy);c+="</div></td>"}c+="</tr></table></div>"}$(this.id).html(c)};BigSixUI.Hand.prototype.widerender=function(a){$(this.id).empty();var b=0;var c='<div><table cellspacing="0" cellpadding="0" border="0"><tr>';while(b<9&&b<a.length){c+="<td>";c+=BoneBuilder.createTallDomino(a[b].light,a[b].heavy);c+="</td>";b++}c+="<tr></table><div>";if(b<a.length){c+='<div><table cellspacing="0" cellpadding="0" border="0"><tr>';while(b<a.length){c+="<td>";c+=BoneBuilder.createTallDomino(a[b].light,a[b].heavy);c+="</td>";b++}c+="<tr></table><div>"}$(this.id).html(c)};var GameManager={};GameManager=function(a){this.options=a;this.messages=new Array();this.state=new BigSix.State(a.number_of_players,false);this.player_names=a.player_names;this.number_of_players=a.number_of_players;this.playerIndex=a.human;this.human=a.human;a.state=this.state;BigSixUI.Skeleton.render(a);this.commentator=new BigSix.Commentator(this.player_names);this.controller=new BigSix.GameController(this.state);this.board=new BigSixUI.Board("board",700,500);this.hand=new BigSixUI.Hand("hand-region");$("#new-game").bind("click",this.options,function(b){BigSixUI.clearDelayedEvents();BigSixUI.SelectGame.render(b.data)})};GameManager.prototype.start=function(b,a){this.controller.startTheHand(b,a);this.renderScoreBoard();if(this.state.plays.length==1){this.board.add(this.state.plays[0],this.state.plays)}};GameManager.prototype.gameRotation=function(){BigSixUI.Skeleton.markTurn(this.state.current_player);try{if(!this.controller.isStopped()){if(this.state.current_player==this.human){this.activatePlayables();return}var c=this;BigSixUI.delayEvent(3000,c,function(f){var d=f.state.plays.length;f.controller.turn();var e=f.state.plays[d];if(!e.pass){f.board.add(e,f.state.plays)}d++;f.renderScoreBoard();f.gameRotation()});return}var a=this.commentator.getCommentary(this.state);if(BigSix.Util.State.isGameOver(this.state)){a='<span id="gameStopped">click to play another game.&nbsp;</span><br/>'+a;$("#message-region > .commentary").html(a);$("#gameStopped").one("click",this.options,function(d){d.data.restart_callback(d)})}else{a='<span id="gameStopped">wash:</span>&nbsp;'+a;$("#message-region > .commentary").html(a);$("#gameStopped").one("click",this,function(f){var d=BigSix.Util.State.isLocked(f.data.state);$("#message-region > .commentary").empty();f.data.board.reset();f.data.start(d,f.data.controller.state.current_player);f.data.gameRotation()})}}catch(b){b.message="game rotation: "+b.message;throw b}};GameManager.prototype.renderScoreBoard=function(){$("#boneyard-value").html(this.state.boneyard.length);for(var a=0;a<this.state.players_hand.length;a++){$("#player-hand-"+a).html(this.state.players_hand[a].length)}for(var a=0;a<this.state.players_score.length;a++){$("#player-score-"+a).html(this.state.players_score[a])}if(typeof this.human!="undefined"){this.hand.render(this.state.players_hand[this.playerIndex])}$("#message-region > .commentary").empty();$("#message-region > .commentary").html(this.commentator.getCommentary(this.state))};GameManager.prototype.activatePlayables=function(){var e=new BigSix.Analysis(new BigSix.View(this.state,this.state.current_player));if(e.moves.length==0){this.promptForBoneyard();return}for(var b=0;b<e.moves.length;b++){var a=e.moves[b];var d="#bone"+a.bone.light+a.bone.heavy;$(d).removeClass("unplayable");$(d).addClass("playable");var c={gm:this,playable:a,all:e.moves};$(d).bind("click",c,function(l){var j=l.data.playable.bone;var k="#bone"+j.light+j.heavy;var h=l.data.gm.board;var f=l.data.gm.hand;$.each(l.data.all,function(p,m){var o="#bone"+m.bone.light+m.bone.heavy;if($(o).hasClass("chosen")){$(o).removeClass("chosen");$(o).addClass("playable")}});$(k).removeClass("playable");$(k).addClass("chosen");h.showPlayablePositions(l.data.playable,l.data.gm.state.plays);var g={gm:l.data.gm,move:l.data.playable};$("#bone_"+l.data.playable.direction).bind("click",g,function(n){var m=n.data.gm;m.humanMove(n.data.move)})})}};GameManager.prototype.humanMove=function(a){var b=this.state.plays.length;this.controller.turn(this.human,a);this.renderScoreBoard();this.board.hidePlayablePositions();var c=this.state.plays[b];this.board.add(c,this.state.plays);this.gameRotation()};GameManager.prototype.humanCanNotPlay=function(){this.controller.turn(this.human,null);this.renderScoreBoard();this.gameRotation()};GameManager.prototype.promptForBoneyard=function(){var a="click to pull from the boneyard!";if(this.state.boneyard.length==0){a="click to pass"}$("#message-region > .commentary").append("<br/><span id='pullOrPass'>"+a+"</span>");$("#pullOrPass").bind("click",this,function(b){$("#pullOrPass").remove();b.data.humanCanNotPlay()})};var $pp_pic_holder;var $ppt;(function(a){a.fn.prettyPhoto=function(z){var e=true;var l=false;var p=[];var d=0;var s;var t;var w;var B;var f="image";var C;var n=g();a(window).scroll(function(){n=g();c()});a(window).resize(function(){c();v()});a(document).keypress(function(F){switch(F.keyCode){case 37:if(d==1){return}o("previous");break;case 39:if(d==setCount){return}o("next");break;case 27:m();break}});z=jQuery.extend({animationSpeed:"normal",padding:40,opacity:0.8,showTitle:true,allowresize:true,counter_separator_label:"/",theme:"light_rounded",callback:function(){}},z);if(a.browser.msie&&a.browser.version==6){z.theme="light_square"}a(this).each(function(){var H=false;var G=false;var I=0;var F=0;p[p.length]=this;a(this).bind("click",function(){k(this);return false})});function k(F){C=a(F);theRel=C.attr("rel");galleryRegExp=/\[(?:.*)\]/;theGallery=galleryRegExp.exec(theRel);isSet=false;setCount=0;E();for(i=0;i<p.length;i++){if(a(p[i]).attr("rel").indexOf(theGallery)!=-1){setCount++;if(setCount>1){isSet=true}if(a(p[i]).attr("href")==C.attr("href")){d=setCount;arrayPosition=i}}}A();$pp_pic_holder.find("p.currentTextHolder").text(d+z.counter_separator_label+setCount);c();a("#pp_full_res").hide();$pp_pic_holder.find(".pp_loaderIcon").show()}showimage=function(I,F,L,K,J,G,H){a(".pp_loaderIcon").hide();if(a.browser.opera){windowHeight=window.innerHeight;windowWidth=window.innerWidth}else{windowHeight=a(window).height();windowWidth=a(window).width()}$pp_pic_holder.find(".pp_content").animate({height:J},z.animationSpeed);projectedTop=n.scrollTop+((windowHeight/2)-(K/2));if(projectedTop<0){projectedTop=0+$pp_pic_holder.find(".ppt").height()}$pp_pic_holder.animate({top:projectedTop,left:((windowWidth/2)-(L/2)),width:L},z.animationSpeed,function(){$pp_pic_holder.width(L);$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(F).width(I);$pp_pic_holder.find("#pp_full_res").fadeIn(z.animationSpeed,function(){a(this).find("object,embed").css("visibility","visible")});j();if(H){a("a.pp_expand,a.pp_contract").fadeIn(z.animationSpeed)}})};function j(){if(isSet&&f=="image"){$pp_pic_holder.find(".pp_hoverContainer").fadeIn(z.animationSpeed)}else{$pp_pic_holder.find(".pp_hoverContainer").hide()}$pp_pic_holder.find(".pp_details").fadeIn(z.animationSpeed);if(z.showTitle&&hasTitle){$ppt.css({top:$pp_pic_holder.offset().top-22,left:$pp_pic_holder.offset().left+(z.padding/2),display:"none"});$ppt.fadeIn(z.animationSpeed)}}function r(){$pp_pic_holder.find(".pp_hoverContainer,.pp_details").fadeOut(z.animationSpeed);$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find("#pp_full_res").fadeOut(z.animationSpeed,function(){a(".pp_loaderIcon").show();D()});$ppt.fadeOut(z.animationSpeed)}function o(F){if(F=="previous"){arrayPosition--;d--}else{arrayPosition++;d++}if(!e){e=true}r();a("a.pp_expand,a.pp_contract").fadeOut(z.animationSpeed,function(){a(this).removeClass("pp_contract").addClass("pp_expand")})}function m(){$pp_pic_holder.find("object,embed").css("visibility","hidden");a("div.pp_pic_holder,div.ppt").fadeOut(z.animationSpeed);a("div.pp_overlay").fadeOut(z.animationSpeed,function(){a("div.pp_overlay,div.pp_pic_holder,div.ppt").remove();if(a.browser.msie&&a.browser.version==6){a("select").css("visibility","visible")}z.callback()});e=true}function h(){if(d==setCount){$pp_pic_holder.find("a.pp_next").css("visibility","hidden");$pp_pic_holder.find("a.pp_arrow_next").addClass("disabled").unbind("click")}else{$pp_pic_holder.find("a.pp_next").css("visibility","visible");$pp_pic_holder.find("a.pp_arrow_next.disabled").removeClass("disabled").bind("click",function(){o("next");return false})}if(d==1){$pp_pic_holder.find("a.pp_previous").css("visibility","hidden");$pp_pic_holder.find("a.pp_arrow_previous").addClass("disabled").unbind("click")}else{$pp_pic_holder.find("a.pp_previous").css("visibility","visible");$pp_pic_holder.find("a.pp_arrow_previous.disabled").removeClass("disabled").bind("click",function(){o("previous");return false})}$pp_pic_holder.find("p.currentTextHolder").text(d+z.counter_separator_label+setCount);C=(isSet)?a(p[arrayPosition]):C;E();if(C.attr("title")){$pp_pic_holder.find(".pp_description").show().html(unescape(C.attr("title")))}else{$pp_pic_holder.find(".pp_description").hide().text("")}if(C.find("img").attr("alt")&&z.showTitle){hasTitle=true;$ppt.html(unescape(C.find("img").attr("alt")))}else{hasTitle=false}}function q(G,F){hasBeenResized=false;u(G,F);imageWidth=G;imageHeight=F;windowHeight=a(window).height();windowWidth=a(window).width();if(((B>windowWidth)||(w>windowHeight))&&e&&z.allowresize&&!l){hasBeenResized=true;notFitting=true;while(notFitting){if((B>windowWidth)){imageWidth=(windowWidth-200);imageHeight=(F/G)*imageWidth}else{if((w>windowHeight)){imageHeight=(windowHeight-200);imageWidth=(G/F)*imageHeight}else{notFitting=false}}w=imageHeight;B=imageWidth}u(imageWidth,imageHeight)}return{width:imageWidth,height:imageHeight,containerHeight:w,containerWidth:B,contentHeight:s,contentWidth:t,resized:hasBeenResized}}function u(G,F){$pp_pic_holder.find(".pp_details").width(G).find(".pp_description").width(G-parseFloat($pp_pic_holder.find("a.pp_close").css("width")));s=F+$pp_pic_holder.find(".pp_details").height()+parseFloat($pp_pic_holder.find(".pp_details").css("marginTop"))+parseFloat($pp_pic_holder.find(".pp_details").css("marginBottom"));t=G;w=s+$pp_pic_holder.find(".ppt").height()+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();B=G+z.padding}function E(){if(C.attr("href").match(/youtube\.com\/watch/i)){f="youtube"}else{if(C.attr("href").indexOf(".mov")!=-1){f="quicktime"}else{if(C.attr("href").indexOf(".swf")!=-1){f="flash"}else{if(C.attr("href").indexOf("iframe")!=-1){f="iframe"}else{f="image"}}}}}function c(){if($pp_pic_holder){if($pp_pic_holder.size()==0){return}}else{return}if(a.browser.opera){windowHeight=window.innerHeight;windowWidth=window.innerWidth}else{windowHeight=a(window).height();windowWidth=a(window).width()}if(e){$pHeight=$pp_pic_holder.height();$pWidth=$pp_pic_holder.width();$tHeight=$ppt.height();projectedTop=(windowHeight/2)+n.scrollTop-($pHeight/2);if(projectedTop<0){projectedTop=0+$tHeight}$pp_pic_holder.css({top:projectedTop,left:(windowWidth/2)+n.scrollLeft-($pWidth/2)});$ppt.css({top:projectedTop-$tHeight,left:(windowWidth/2)+n.scrollLeft-($pWidth/2)+(z.padding/2)})}}function D(){h();if(f=="image"){imgPreloader=new Image();nextImage=new Image();if(isSet&&d>setCount){nextImage.src=a(p[arrayPosition+1]).attr("href")}prevImage=new Image();if(isSet&&p[arrayPosition-1]){prevImage.src=a(p[arrayPosition-1]).attr("href")}pp_typeMarkup='<img id="fullResImage" src="" />';$pp_pic_holder.find("#pp_full_res")[0].innerHTML=pp_typeMarkup;$pp_pic_holder.find(".pp_content").css("overflow","hidden");$pp_pic_holder.find("#fullResImage").attr("src",C.attr("href"));imgPreloader.onload=function(){var F=q(imgPreloader.width,imgPreloader.height);imgPreloader.width=F.width;imgPreloader.height=F.height;showimage(imgPreloader.width,imgPreloader.height,F.containerWidth,F.containerHeight,F.contentHeight,F.contentWidth,F.resized)};imgPreloader.src=C.attr("href")}else{movie_width=(parseFloat(b("width",C.attr("href"))))?b("width",C.attr("href")):"425";movie_height=(parseFloat(b("height",C.attr("href"))))?b("height",C.attr("href")):"344";if(movie_width.indexOf("%")!=-1||movie_height.indexOf("%")!=-1){movie_height=(a(window).height()*parseFloat(movie_height)/100)-100;movie_width=(a(window).width()*parseFloat(movie_width)/100)-100;parsentBased=true}else{movie_height=parseFloat(movie_height);movie_width=parseFloat(movie_width)}if(f=="quicktime"){movie_height+=13}correctSizes=q(movie_width,movie_height);if(f=="youtube"){pp_typeMarkup='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+correctSizes.width+'" height="'+correctSizes.height+'"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://www.youtube.com/v/'+b("v",C.attr("href"))+'" /><embed src="http://www.youtube.com/v/'+b("v",C.attr("href"))+'" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+correctSizes.width+'" height="'+correctSizes.height+'"></embed></object>'}else{if(f=="quicktime"){pp_typeMarkup='<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="'+correctSizes.height+'" width="'+correctSizes.width+'"><param name="src" value="'+C.attr("href")+'"><param name="autoplay" value="true"><param name="type" value="video/quicktime"><embed src="'+C.attr("href")+'" height="'+correctSizes.height+'" width="'+correctSizes.width+'" autoplay="true" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>'}else{if(f=="flash"){flash_vars=C.attr("href");flash_vars=flash_vars.substring(C.attr("href").indexOf("flashvars")+10,C.attr("href").length);filename=C.attr("href");filename=filename.substring(0,filename.indexOf("?"));pp_typeMarkup='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+correctSizes.width+'" height="'+correctSizes.height+'"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="'+filename+"?"+flash_vars+'" /><embed src="'+filename+"?"+flash_vars+'" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+correctSizes.width+'" height="'+correctSizes.height+'"></embed></object>'}else{if(f=="iframe"){movie_url=C.attr("href");movie_url=movie_url.substr(0,movie_url.indexOf("iframe")-1);pp_typeMarkup='<iframe src ="'+movie_url+'" width="'+(correctSizes.width-10)+'" height="'+(correctSizes.height-10)+'" frameborder="no"></iframe>'}}}}$pp_pic_holder.find("#pp_full_res")[0].innerHTML=pp_typeMarkup;showimage(correctSizes.width,correctSizes.height,correctSizes.containerWidth,correctSizes.containerHeight,correctSizes.contentHeight,correctSizes.contentWidth,correctSizes.resized)}}function g(){if(self.pageYOffset){scrollTop=self.pageYOffset;scrollLeft=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){scrollTop=document.documentElement.scrollTop;scrollLeft=document.documentElement.scrollLeft}else{if(document.body){scrollTop=document.body.scrollTop;scrollLeft=document.body.scrollLeft}}}return{scrollTop:scrollTop,scrollLeft:scrollLeft}}function v(){a("div.pp_overlay").css({height:a(document).height(),width:a(window).width()})}function A(){toInject="";toInject+="<div class='pp_overlay'></div>";if(f=="image"){pp_typeMarkup='<img id="fullResImage" src="" />'}else{pp_typeMarkup=""}toInject+='<div class="pp_pic_holder"><div class="pp_top"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div><div class="pp_content"><a href="#" class="pp_expand" title="Expand the image">Expand</a><div class="pp_loaderIcon"></div><div class="pp_hoverContainer"><a class="pp_next" href="#">next</a><a class="pp_previous" href="#">previous</a></div><div id="pp_full_res">'+pp_typeMarkup+'</div><div class="pp_details clearfix"><a class="pp_close" href="#">Close</a><p class="pp_description"></p><div class="pp_nav"><a href="#" class="pp_arrow_previous">Previous</a><p class="currentTextHolder">0'+z.counter_separator_label+'0</p><a href="#" class="pp_arrow_next">Next</a></div></div></div><div class="pp_bottom"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div></div>';toInject+='<div class="ppt"></div>';a("body").append(toInject);$pp_pic_holder=a(".pp_pic_holder");$ppt=a(".ppt");a("div.pp_overlay").css("height",a(document).height()).bind("click",function(){m()});$pp_pic_holder.css({opacity:0}).addClass(z.theme);a("a.pp_close").bind("click",function(){m();return false});a("a.pp_expand").bind("click",function(){$this=a(this);if($this.hasClass("pp_expand")){$this.removeClass("pp_expand").addClass("pp_contract");e=false}else{$this.removeClass("pp_contract").addClass("pp_expand");e=true}r();$pp_pic_holder.find(".pp_hoverContainer, #pp_full_res, .pp_details").fadeOut(z.animationSpeed,function(){D()});return false});$pp_pic_holder.find(".pp_previous, .pp_arrow_previous").bind("click",function(){o("previous");return false});$pp_pic_holder.find(".pp_next, .pp_arrow_next").bind("click",function(){o("next");return false});$pp_pic_holder.find(".pp_hoverContainer").css({"margin-left":z.padding/2});if(!isSet){$pp_pic_holder.find(".pp_hoverContainer,.pp_nav").hide()}if(a.browser.msie&&a.browser.version==6){a("body").addClass("ie6");a("select").css("visibility","hidden")}a("div.pp_overlay").css("opacity",0).fadeTo(z.animationSpeed,z.opacity,function(){$pp_pic_holder.css("opacity",0).fadeIn(z.animationSpeed,function(){$pp_pic_holder.attr("style","left:"+$pp_pic_holder.css("left")+";top:"+$pp_pic_holder.css("top")+";");D()})})}};function b(e,d){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+e+"=([^&#]*)";var g=new RegExp(c);var f=g.exec(d);if(f==null){return""}else{return f[1]}}})(jQuery);if(typeof BigSixUI=="undefined"){BigSixUI={}}BigSixUI.SelectGame={manager:null,render:function(a){var b='<div id="seated-at-table" style="width:450px;">';b+=this.renderSelectGame(a.number_of_players,a.player_names);b+="</div>";b+=this.renderChoices();if($(a.element).is("body")){$(a.element).empty();$(a.element).html(b)}else{$("#"+a.element).empty();$("#"+a.element).html(b)}$(a.element).empty();$(a.element).html(b);BigSixUI.SelectGame.setNumberOfPlayers({data:a});$("#choice-players-2").bind("click",{element:a.element,number_of_players:2,player_names:a.player_names,callMoney:a.callMoney},BigSixUI.SelectGame.setNumberOfPlayers);$("#choice-players-3").bind("click",{element:a.element,number_of_players:3,player_names:a.player_names,callMoney:a.callMoney},BigSixUI.SelectGame.setNumberOfPlayers);$("#choice-players-4").bind("click",{element:a.element,number_of_players:4,player_names:a.player_names,callMoney:a.callMoney},BigSixUI.SelectGame.setNumberOfPlayers)},startGame:function(a){BigSixUI.SelectGame.manager=new GameManager(a.data);BigSixUI.SelectGame.manager.start(true);BigSixUI.SelectGame.manager.gameRotation()},restartGame:function(a){BigSixUI.SelectGame.render(a.data)},setNumberOfPlayers:function(c){var b=BigSixUI.SelectGame.renderSelectGame(c.data.number_of_players,c.data.player_names);$("#start-game").unbind();$("#seated-at-table").empty();$("#seated-at-table").html(b);BigSixUI.number_of_players=c.data.number_of_players;var a={number_of_players:c.data.number_of_players,human:0,element:c.data.element,player_names:c.data.player_names,callMoney:c.data.callMoney,restart_callback:BigSixUI.SelectGame.restartGame};$("#start-game").bind("click",a,BigSixUI.SelectGame.startGame)},renderSelectGame:function(b,c){var a='<table cellspacing="0" cellpadding="0" border="0"><tr><td><div class="select-column"></div><div class="seat"></div>';a+=BigSixUI.SelectGame.renderScore();a+='<div class="seat"></div>';if(b>2){a+=BigSixUI.SelectGame.renderScore(1,c)}else{a+=BigSixUI.SelectGame.renderScore()}a+='</td><td><div class="select-column">';if(b>2){a+=BigSixUI.SelectGame.renderScore(2,c)}else{a+=BigSixUI.SelectGame.renderScore(1,c)}a+='<div id="cardtable">';a+=BigSixUI.SelectGame.renderHandBox(b);a+="</div>";a+=BigSixUI.SelectGame.renderScore(0,c);a+='</div></td><td><div class="select-column"><div class="seat"></div><div class="seat"></div></div><div class="seat"></div>';if(b>3){a+=BigSixUI.SelectGame.renderScore(3,c)}else{a+=BigSixUI.SelectGame.renderScore()}a+="</div></td></tr></table>";return a},renderScore:function(c,b){var a='<div class="seat">';if(typeof c!="undefined"){a+=""+b[c]+""}a+="</div>";return a},renderHandBox:function(b){var a='<div id="start-game" />';return a},renderChoices:function(){var a='<div class="choose"><table cellpadding="0" cellspacing="0" border="0"><tr>';a+=BigSixUI.SelectGame.renderChoice(2);a+=BigSixUI.SelectGame.renderChoice(3);a+=BigSixUI.SelectGame.renderChoice(4);a+="</tr></table></div>";return a},renderChoice:function(b){var a='<td><div id="choice-players-'+b+'" class="choice">';a+=BoneBuilder.createTallDomino(b,0);a+='<div style="margin-top:10px;width:100px;padding:4px;font-size:13px;font-weight:bold;text-align:center;">Play a '+b+" person game</div>";a+="</div></td>";return a}};